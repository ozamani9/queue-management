{
	"info": {
		"_postman_id": "8a148c24-b185-46b9-8446-05e490069c1b",
		"name": "API_Test_TheQ_Booking",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Setup TheQ",
			"item": [
				{
					"name": "Setup-Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "01cd4827-6473-43b0-b219-47397dac41a9",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "011ad469-ba83-47e6-bb8d-65af62ae7c74",
								"exec": [
									"//  See if the use-prefix global has been set.  Use default if not.",
									"let usePrefix = '';",
									"if (pm.globals.get('use-prefix')) {",
									"    console.log(\"==> use-prefix exists\");",
									"    usePrefix = pm.globals.get('use-prefix');",
									"    console.log(\"    --> Prefix is: \" + usePrefix);",
									"    ",
									"    //  Set up all globals, using the correct prefix.",
									"    pm.globals.set('auth_url', pm.globals.get(usePrefix + 'auth_url'));",
									"    pm.globals.set('realm', pm.globals.get(usePrefix + 'realm'));",
									"    pm.globals.set('clientid', pm.globals.get(usePrefix + 'clientid'));",
									"    pm.globals.set('client_secret', pm.globals.get(usePrefix + 'client_secret'));",
									"    pm.globals.set('url', pm.globals.get(usePrefix + 'url'));",
									"}",
									"else {",
									"    console.log(\"==> use-prefix does not exist\");",
									"    console.log(\"    --> No default globals set.\");",
									"}",
									"",
									"//  If no maximum load time defined, set a default.",
									"if (!pm.globals.get('max_load_time')) {",
									"    console.log(\"==> max_load_time not present, default set.\");",
									"    pm.globals.set(\"max_load_time\", JSON.stringify(1503));",
									"}",
									"",
									"//  If no maximum response defined, set a default.",
									"if (!pm.globals.get('max_response_time')) {",
									"    console.log(\"==> max_response_time not present, default set.\");",
									"    pm.globals.set(\"max_response_time\", JSON.stringify(15005));",
									"}",
									"",
									"//  Display the values of all globals.",
									"console.log(\"\");",
									"console.log(\"==> Globals are:\");",
									"console.log(\"    --> auth_url:          \" + pm.globals.get(\"auth_url\"));",
									"console.log(\"    --> realm:             \" + pm.globals.get(\"realm\"));",
									"console.log(\"    --> clientid:          \" + pm.globals.get(\"clientid\"));",
									"console.log(\"    --> client_secret:     \" + pm.globals.get(\"client_secret\"));",
									"console.log(\"    --> url:               \" + pm.globals.get(\"url\"));",
									"console.log(\"    --> max_load_time:     \" + pm.globals.get(\"max_load_time\"));",
									"console.log(\"    --> max_response_time: \" + pm.globals.get(\"max_response_time\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Dummy data."
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Auth-First",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2d33f62c-61bd-45bb-ad7f-6fc34f0f0f2f",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_first\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n\nconst echoPostRequest = {\n  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n          + '&username=' + userid \n          + '&password=' + password\n          + '&client_secret=' + client_secret\n  }\n};\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    if (jsonData.hasOwnProperty('access_token')) {\n    \tpm.globals.set(\"token\", jsonData.access_token);\n\t    pm.globals.set(\"refresh_token\", jsonData.refresh_token);\n\t    if (err) {\n\t        console.log(err);\n\t    }\n\t    // console.log(err ? err : res.json());\n\t} else {\n\t    pm.globals.set(\"token\", 0);\n\t    pm.globals.set(\"refresh_token\", 0);\n\t    pm.globals.set(\"token_expires\", 0);\n\t    pm.globals.set(\"refresh_token_expires\", 0);\n\t}\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Auth-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "59de36df-c689-424c-88b3-1112316e27da",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_script\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-AuthToken-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "21379f03-6f98-4ae6-b857-d304501a48d0",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_token_script\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n\nconst echoPostRequest = {\n  url: authurl + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n         + '&username=' + userid \n         + '&password=' + password\n         + '&client_secret=' + client_secret\n  }\n};\n\npm.sendRequest(echoPostRequest, function (err, res) {\n    if (err) { console.log(err); }\n    else {\n      var jsonData = res.json();\n      pm.globals.set(\"token\", jsonData.access_token);\n      pm.globals.set(\"refresh_token\", jsonData.refresh_token);\n      pm.globals.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));\n      pm.globals.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));\n    }\n    //console.log(err ? err : res.json());\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-AuthRefresh-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8692a7bf-bbb0-477c-9986-e0040d4bf767",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_refresh_script\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nrefresh_token = environment.refresh_token;\nclient_secret = globals.client_secret;\n\nconst echoPostRequest = {\n  url: authurl +'/auth/realms/' +realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=refresh_token&client_id=' + clientid \n         + '&refresh_token=' + refresh_token \n         + '&client_secret=' + client_secret\n  }\n};\n\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    pm.globals.set(\"token\", jsonData.access_token);\n    pm.globals.set(\"refresh_token\", jsonData.refresh_token);\n    pm.globals.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));\n    pm.globals.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));\n\n    console.log(err ? err : res.json());\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Basic-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0b495d56-6eb8-4ebd-b9a5-e05e8365a0dc",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"basic_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\r\nmax_response_time = JSON.parse(globals.max_response_time);\r\n\r\n//  Check to make sure the response time was within the maximum allowed.\r\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\r\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\r\n});\r\n\r\n//  Other tests.\r\npm.test(\"Response code for request is 200\", function(){\r\n    pm.response.to.have.status(200);\r\n});\r\npm.test('Response header should have Content-Type of application/json', function() {\r\n    pm.response.to.have.header('content-type', 'application/json');\r\n});\r\npm.test('Response body be in JSON format', function() {\r\n    pm.response.to.be.json; \r\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Complex-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "078b6394-17fb-4e65-8439-c65ce1ecc2e5",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"complex_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\nmax_response_time = JSON.parse(globals.max_response_time);\n\n//  Check to make sure the response time was within the maximum allowed.\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\n});\n\n//  Other tests.\npm.test(\"Response code for request is 200\", function(){\n    pm.response.to.have.status(200);\n});\npm.test('Response header should have Content-Type of application/json', function() {\n    pm.response.to.have.header('content-type', 'application/json');\n});\npm.test('Response body be in JSON format', function() {\n    pm.response.to.be.json; \n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Create-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "63d16478-58a2-40db-b69c-e893afef941e",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"create_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\nmax_response_time = JSON.parse(globals.max_response_time);\n\n//  Check to make sure the response time was within the maximum allowed.\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\n});\n\n//  Other tests.\npm.test(\"Response status code should be 201 CREATED\", function(){\n    pm.response.to.have.status(201);\n});\npm.test('Response header should have Content-Type of application/json', function() {\n    pm.response.to.have.header('content-type', 'application/json');\n});\npm.test('Response body be in JSON format', function() {\n    pm.response.to.be.json; \n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Citizen-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2cc0e015-d794-4130-9401-43ed40e077b2",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"citizen_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"start_time\" : {\n            \"type\" : \"string\"\n        },\n        \"citizen_name\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"number\", \"object\"]\n        },\n        \"qt_xn_citizen_ind\" : {\n            \"type\" : \"number\"\n        },\n        \"ticket_number\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"service_reqs\" : {\n            \"type\" : \"array\"\n        },\n        \"office_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"cs\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen_comments\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \n    },\n    \"required\" : [\"start_time\", \"citizen_name\", \"citizen_id\",\n                  \"qt_xn_citizen_ind\", \"ticket_number\", \"service_reqs\",\n                  \"office_id\", \"cs\", \"citizen_comments\"]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"citizens\")) {\n\tallElements = jsonData.citizens;\n};\n\nif (jsonData.hasOwnProperty(\"citizen\")) {\n\tallElements = [];\n\tallElements.push(jsonData.citizen);\n};\n\nvar elementCount = 0;\n\n//  If there are some citizens, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each channel, create list of citizen ids.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Citizen (\" + elementCount + \"): \" + element.citizen_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n        \n        //  Test the authenticate response.\n        pm.test(testTitle + \"qt_xn_citizen_ind must be 0 or 1\", function() {\n            pm.expect(element.qt_xn_citizen_ind).to.be.within(0,1);\n        });\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Service-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0b51c620-3e49-4b0e-8104-b3bc8650d189",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"service_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"sr_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"sr_state\" : {\n            \"type\" : \"object\"\n        },\n        \"periods\" : {\n            \"type\" : \"array\"\n        },\n        \"service\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"quantity\" : {\n            \"type\" : \"number\"\n        },\n        \"service_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"channel\" : {\n        \t\"type\" : \"object\"\n        },\n        \"channel_id\" : {\n        \t\"type\" : [\"object\", \"number\"]\n        }\n        \n    },\n    \"required\" : [\n    \t\"sr_id\", \"sr_state\", \"periods\", \"service\", \"citizen\", \"quantity\",\n    \t\"service_id\", \"citizen_id\", \"channel\", \"channel_id\"\n    ]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"service_requests\")) {\n\tallElements = jsonData.service_requests;\n};\n\nif (jsonData.hasOwnProperty(\"service_request\")) {\n    allElements = [];\n\tallElements.push(jsonData.service_request);\n}\n\nvar elementCount = 0;\n\n//  If there are some service requests, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each service request.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Service Request (\" + elementCount + \"): \" + element.sr_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Get-Active-Citizens-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "85af6af4-d9b2-443b-b21f-385c8c464740",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"get_active_citizens_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Declare and initialize variables.\nvar elementCount = 0;\nvar srCount = 0;\nvar isFirstCitizen = true;\n\n\n//  Loop to create list of active citizen ids.\nallElements.forEach(function(element) {\n    srCount = element.service_reqs.length;\n\n    //  If citizen active, add to the list.\n    if (element.cs.cs_state_name === \"Active\") {\n        //console.log(\"Citizen (\" + elementCount + \") \" + element.citizen_id +\n        //    \" Active: SRCount = \" + srCount);\n        citizenIds.push(element.citizen_id);\n\n        //  Save the first citizen.\n        if (isFirstCitizen) {\n            currentCitizen = element;\n            isFirstCitizen = false;\n        }\n    }\n        \n    //  Increment count.\n    elementCount++;\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-CSR-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d9e7f478-c8dd-4eb0-8ad4-3ebb80d8bd31",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"csr_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar csrSchema = {\n    \"type\": \"object\",\n    \"properties\": {\n        \"csr\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"counter\": {\"type\": \"number\"},\n                \"counter_id\": {\"type\": \"number\"},\n                \"csr_id\": {\"type\": \"number\"},\n                \"csr_state\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"csr_state_desc\": {\"type\": \"string\"},\n                        \"csr_state_id\": {\"type\": \"number\"},\n                        \"csr_state_name\": {\"type\": \"string\"}\n                    },\n                    \"required\": [\"csr_state_desc\", \"csr_state_id\", \"csr_state_name\"]\n                },\n                \"csr_state_id\": {\"type\": \"number\"},\n                \"deleted\": {\"type\": [\"null\", \"string\"]},\n                \"finance_designate\": {\"type\": \"number\"},\n                \"ita2_designate\": {\"type\": \"number\"},\n                \"office\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"appointment_duration\": {\"type\": [\"null\", \"number\"]},\n                        \"appointments_days_limit\": {\"type\": [\"null\", \"number\"]},\n                        \"appointments_enabled_ind\": {\"type\": \"number\"},\n                        \"back_office_list\": {\"type\": \"array\"},\n                        \"civic_address\": {\"type\": [\"null\", \"string\"]},\n                        \"counters\": {\"type\": \"array\"},\n                        \"deleted\": {\"type\": [\"null\", \"string\"]},\n                        \"exams_enabled_ind\": {\"type\": \"number\"},\n                        \"latitude\": {\"type\": \"number\"},\n                        \"longitude\": {\"type\": \"number\"},\n                        \"max_person_appointment_per_day\": {\"type\": [\"null\", \"number\"]},\n                        \"office_appointment_message\": {\"type\": [\"null\", \"string\"]},\n                        \"office_id\": {\"type\": \"number\"},\n                        \"office_name\": {\"type\": \"string\"},\n                        \"office_number\": {\"type\": \"number\"},\n                        \"online_status\": {\"type\": \"string\"},\n                        \"quick_list\": {\"type\": \"array\"},\n                        \"sb\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"sb_id\": {\"type\": \"number\"},\n                                \"sb_type\": {\"type\": \"string\"}\n                            },\n                            \"required\": [\"sb_id\", \"sb_type\"]\n                        },\n                        \"sb_id\": {\"type\": \"number\"},\n                        \"telephone\": {\"type\": [\"null\", \"string\"]},\n                        \"timeslots\": {\n                            \"type\": \"array\",\n                            \"items\": [{\n                                \"day_of_week\": {\"type\": [\"null\", \"array\"]},\n                                \"end_time\": {\"type\": \"string\"},\n                                \"no_of_slots\": {\"type\": \"number\"},\n                                \"office\": {\"type\": \"number\"},\n                                \"start_time\": {\"type\": \"string\"}\n                            }]\n                        },\n                        \"timezone\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"timezone_id\": {\"type\": \"number\"},\n                                \"timezone_name\": {\"type\": \"string\"}\n                            },\n                            \"required\": [\"timezone_id\", \"timezone_name\"]\n                        }\n                    },\n                    \"required\": [\"appointment_duration\", \"appointments_days_limit\",\n                                 \"appointments_enabled_ind\", \"back_office_list\", \"civic_address\",\n                                 \"counters\", \"deleted\", \"exams_enabled_ind\", \"latitude\", \"longitude\",\n                                 \"max_person_appointment_per_day\", \"office_appointment_message\",\n                                 \"office_id\", \"office_name\", \"office_number\", \"online_status\",\n                                 \"quick_list\", \"sb\", \"sb_id\", \"telephone\", \"timeslots\", \"timezone\"]\n                }\n            },\n            \"required\": [\"counter\", \"counter_id\", \"csr_id\", \"csr_state\", \"csr_state_id\",\n                         \"deleted\", \"finance_designate\", \"ita2_designate\", \"office\"]\n        },\n        \"attention_needed\": {\"type\": \"boolean\"},\n        \"active_citizens\": {\"type\": \"array\"},\n        \"back_office_display\": {\"type\": \"string\"},\n        \"recurring_feature_flag\": {\"type\": \"string\"},\n    },\n    \"required\": [\"csr\", \"attention_needed\", \"active_citizens\",\n                 \"back_office_display\", \"recurring_feature_flag\"]\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate CSR Schema\", function(){\n    pm.expect(tv4.validate(jsonData, csrSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				}
			],
			"description": "This folder performs basic authentication features.",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check app health",
			"item": [
				{
					"name": "Check healthz driver TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9b179998-4ba8-4835-a02b-bbd8ebadf550",
								"exec": [
									"//  Get the maximum response time allowed.",
									"max_load_time = JSON.parse(globals.max_load_time);",
									"",
									"//  Set health response time variable.",
									"health_tries = 15;",
									"counter = 1;",
									"postman.setEnvironmentVariable(\"health_tries\", JSON.stringify(health_tries));",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Health Driver: Try \" + counter.toString() + \": Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is healthy'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_load_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"}",
									"    ",
									"//  Response time is too long.  Try again, give pod a chance to spin up.",
									"else {",
									"    postman.setNextRequest(\"Check the healthz endpoint TheQ\");",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d7192bce-e689-4fbd-bbcd-0ee314fc453f",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the healthz endpoint TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0c9cda76-f6f8-4bd9-bf39-ed19ceb3ad71",
								"exec": [
									"//  Get the maximum load time allowed.",
									"max_load_time = JSON.parse(postman.getEnvironmentVariable(\"max_load_time\"));",
									"",
									"//  Get and update variables.",
									"health_tries = JSON.parse(postman.getEnvironmentVariable(\"health_tries\"));",
									"counter = JSON.parse(postman.getEnvironmentVariable(\"health_counter\")) + 1;",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Health Driver: Try \" + counter.toString() + \": Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is healthy'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_load_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"}",
									"    ",
									"//  Response time is too long.",
									"else {",
									"    ",
									"    //  You haven't reached your maximum tries yet.  Try again.",
									"    if (counter < health_tries) {",
									"        postman.setNextRequest(\"Check the healthz endpoint\");",
									"    }",
									"    ",
									"    //   You have reached the maximum.  An error, go to next test.",
									"    else {",
									"        pm.test(\"Response should be below \" + max_load_time.toString() + ' in ' + health_tries.toString() + ' tries.', function() {",
									"            pm.expect(counter).to.be.below(health_tries);",
									"        });",
									"        postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"    }",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "2ce93948-1971-4511-afd8-6346b4b78e95",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the readyz endpoint TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b7ee06d0-36b2-4306-85a5-9dfe83178bed",
								"exec": [
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is ready'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is ready');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "a49d5e9e-f6fe-47be-a64b-149f902ae94b",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}readyz/",
							"host": [
								"{{url}}readyz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Checks the application health by calling the healthz and readyz endpoints",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check user login",
			"item": [
				{
					"name": "Authenticate default QTxn user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "78697118-b5c3-481e-a4cc-cb1a81fe3bb0",
								"exec": [
									"//  Do the basic checks.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to make sure that the access token field is not null",
									"pm.test(\"Access Token is not null\", function(){",
									"    var access_token = jsonData.access_token;",
									"    pm.expect(access_token).not.eql(null);",
									"});",
									"",
									"//Test to make sure that the refresh token response field is not null",
									"pm.test(\"Refresh Token is not null\", function(){",
									"    var refresh_token = jsonData.refresh_token;",
									"    pm.expect(refresh_token).not.eql(null);",
									"});",
									"",
									"//Test to make sure that expires in response field is not nullf",
									"pm.test(\"Expires In is not null\", function(){",
									"    var expires_in = jsonData.expires_in;",
									"    pm.expect(expires_in).not.eql(null);",
									"});",
									"",
									"//Test to make sure that refresh expires in response fiels is not null",
									"pm.test(\"Refresh Expires In is not null\", function(){",
									"    var refresh_expires_in = jsonData.refresh_expires_in;",
									"    pm.expect(refresh_expires_in).not.eql(null);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=password&client_id={{clientid}}&username={{userid}}&password={{password}}&client_secret={{client_secret}}"
						},
						"url": {
							"raw": "{{auth_url}}/auth/realms/{{realm}}/protocol/openid-connect/token?Content-Type=application/x-www-form-urlencoded",
							"host": [
								"{{auth_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							],
							"query": [
								{
									"key": "Content-Type",
									"value": "application/x-www-form-urlencoded"
								}
							]
						},
						"description": "Make sure the operator ID can log in"
					},
					"response": []
				},
				{
					"name": "Who am I TheQ",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b294ea7c-df30-4276-9a7a-db825709d52c",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "345099b1-68fa-4412-a9b0-96b05dfc8149",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data, make sure schema is OK.",
									"var jsonData = JSON.parse(responseBody);",
									"eval(environment.csr_schema_check)",
									"",
									"if (jsonData.hasOwnProperty(\"csr\")) {",
									"\tcurrentOfficeId = jsonData.csr.office_id;",
									"\tcurrentOfficeNumber = jsonData.csr.office.office_number;",
									"\tcurrentCsrId = jsonData.csr.csr_id;",
									"    postman.setEnvironmentVariable(\"current_office_id\", currentOfficeId);",
									"    postman.setEnvironmentVariable(\"current_office_number\", currentOfficeNumber);",
									"    postman.setEnvironmentVariable(\"current_csr_id\", currentCsrId);",
									"};",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check channels",
			"item": [
				{
					"name": "Get channels",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "97100087-ce38-4653-abda-ffd1e8adb77e",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b0e5d4a9-5a67-4d8e-99b4-d5e7be3d404b",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"channel_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"channel_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        }",
									"    },",
									"    \"required\" : [\"channel_name\", \"channel_id\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allChannels = jsonData.channels;",
									"var channelCount = 0;",
									"var phoneId = 0;",
									"var emailId = 0;",
									"var phoneText = \"Phone\";",
									"var emailText = \"Email/Fax/Mail\";",
									"allChannels.forEach(function(channel) {",
									"    channelCount ++;",
									"    var testTitle = \"Channel (\" + channelCount + \"): ID \" + channel.channel_id + \" Name \" + channel.channel_name + \" conforms to schema\";",
									"    tests[testTitle] = tv4.validate(channel, schema);",
									"    if (channel.channel_name === phoneText) {",
									"        phoneId = channel.channel_id;",
									"    }",
									"    if (channel.channel_name === emailText) {",
									"        emailId = channel.channel_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the phone ID.",
									"pm.test(phoneText + ' id was ' + phoneId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(phoneId).to.not.be.eql(0);",
									"});",
									"",
									"//  Check that you found the email ID.",
									"pm.test(emailText + ' id was ' + emailId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(emailId).to.not.be.eql(0);",
									"});",
									"",
									"//  Store this ID for future use.",
									"postman.setEnvironmentVariable(\"channel_telephone_id\", JSON.stringify(phoneId));",
									"postman.setEnvironmentVariable(\"channel_email_id\", JSON.stringify(emailId));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}channels/",
							"host": [
								"{{url}}channels"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check counters",
			"item": [
				{
					"name": "Store CSR and Office Info",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "71eb99f6-119d-4413-aa8d-96cd44ba6f9d",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e503125a-de71-4e43-884a-0dfc3c65581c",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var CSRSSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"csr_id\": {\"type\": \"number\"},",
									"        \"csr_state\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"csr_state_desc\": {\"type\": \"string\"},",
									"                \"csr_state_id\": {\"type\": \"number\"},",
									"                \"csr_state_name\": {\"type\": \"string\"}",
									"            },",
									"            \"required\": [\"csr_state_desc\", \"csr_state_id\", \"csr_state_name\"]",
									"        },",
									"        \"csr_state_id\": {\"type\": \"number\"},",
									"        \"deleted\": {},",
									"        \"finance_designate\": {\"type\": \"number\"},",
									"        \"office_manager\": {\"type\": \"number\"},",
									"        \"ita2_designate\": {\"type\": \"number\"},",
									"        \"office\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"appointments_enabled_ind\": {\"type\": \"number\"},",
									"                \"exams_enabled_ind\": {\"type\": \"number\"},",
									"                \"office_id\": {\"type\": \"number\"},",
									"                \"office_name\": {\"type\": \"string\"},",
									"                \"office_number\": {\"type\": \"number\"},",
									"                \"sb\":{",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"sb_id\": {\"type\": \"number\"},",
									"                        \"sb_type\": {\"type\": \"string\"}",
									"                    },",
									"                    \"required\": [\"sb_id\", \"sb_type\"]",
									"                }",
									"            },",
									"            \"required\": [\"appointments_enabled_ind\", \"exams_enabled_ind\", \"office_id\", \"office_name\", \"office_number\", \"sb\"]",
									"        },",
									"        \"office_name\": {\"type\": \"string\"},",
									"        \"pesticide_designate\": {\"type\": \"number\"},",
									"        \"qt_xn_csr_ind\": {\"type\": \"number\"},",
									"        \"receptionist_ind\": {\"type\": \"number\"},",
									"        \"role\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"role_code\": {\"type\": \"string\"},",
									"                \"role_desc\": {\"type\": \"string\"},",
									"                \"role_id\": {\"type\": \"number\"}",
									"            },",
									"            \"required\": [\"role_code\", \"role_desc\", \"role_id\"]",
									"        },",
									"        \"role_id\": {\"type\": \"number\"},",
									"        \"username\": {\"type\": \"string\"}",
									"    },",
									"    \"attention_needed\": {\"type\": \"boolean\"},",
									"    \"required\": [\"csr\", \"attention_needed\"]",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response CSRs Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, CSRSSchema)).to.be.true;",
									"});",
									"",
									"//  Make sure that jsonData has an csr property.",
									"pm.test(\"Response should have csr property\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"csr\")).to.be.true;",
									"});",
									"",
									"var csr = 0;",
									"var office = 0;",
									"var counters = 0;",
									"var counter_text = \"Counter\";",
									"var counter_id = 0;",
									"var qtxn_text = \"Quick Trans\";",
									"var qtxn_id = 0;",
									"",
									"if (jsonData.hasOwnProperty(\"csr\")) {",
									"\tcurrentOfficeId = jsonData.csr.office_id;",
									"\tcurrentOfficeNumber = jsonData.csr.office.office_number;",
									"    postman.setEnvironmentVariable(\"current_office_id\", currentOfficeId);",
									"    postman.setEnvironmentVariable(\"current_office_number\", currentOfficeNumber);",
									"    postman.setEnvironmentVariable(\"current_csr_id\", jsonData.csr.csr_id);",
									"    ",
									"    csr = jsonData.csr;",
									"    counter_id = 0;",
									"    qtxn_id = 0;",
									"",
									"    //  Make sure that jsonData has an booking property.",
									"    pm.test(\"CSR should have office property\", function(){",
									"        pm.expect(csr.hasOwnProperty(\"office\")).to.be.true;",
									"    });",
									"    ",
									"    //  Make sure office has counter property.",
									"    if (csr.hasOwnProperty(\"office\")) {",
									"        office = csr.office;",
									"        ",
									"        //  Make sure that jsonData has an booking property.",
									"        pm.test(\"Office should have counters property\", function(){",
									"            pm.expect(office.hasOwnProperty(\"counters\")).to.be.true;",
									"        });",
									"",
									"        //  Make sure office has counter property.",
									"        if (office.hasOwnProperty(\"counters\")) {",
									"            counters = office.counters;",
									"            ",
									"            //  Search for Counter and Quick Trans counters",
									"            counters.forEach(function(counter) {",
									"                if (counter.counter_name === counter_text) {",
									"                    counter_id = counter.counter_id;",
									"                }",
									"                if (counter.counter_name === qtxn_text) {",
									"                    qtxn_id = counter.counter_id;",
									"                }",
									"            });",
									"            ",
									"            //  Make sure you found the right IDs.",
									"            pm.test(\"Counter ID (\" + counter_id.toString() + \") should not be 0\", function(){",
									"                pm.expect(counter_id).to.not.be.eql(0);",
									"            });",
									"            pm.test(\"Quick Transaction ID (\" + qtxn_id.toString() + \") should not be 0\", function(){",
									"                pm.expect(qtxn_id).to.not.be.eql(0);",
									"            });",
									"            ",
									"            //  Store the ids for future use.",
									"            // postman.setEnvironmentVariable(\"counter_id\", counter_id);",
									"            // postman.setEnvironmentVariable(\"qtxn_id\", qtxn_id);",
									"            postman.setEnvironmentVariable(\"counter_id\", JSON.stringify(counter_id.toString()));",
									"            postman.setEnvironmentVariable(\"qtxn_id\", JSON.stringify(qtxn_id.toString()));",
									"        }",
									"",
									"        ",
									"    }",
									"",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check categories",
			"item": [
				{
					"name": "Get categories",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "1ff4f089-ee1a-41c0-87a3-ed24a332172e",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "29ba8824-df07-433c-b0a8-6ba1bca7a686",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allCategories = jsonData.categories;",
									"var categoryCount = 0;",
									"allCategories.forEach(function(category) {",
									"    categoryCount ++;",
									"    var testTitle = \"Category (\" + categoryCount + \"): \" + category.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(category, schema);",
									"    var displayInd = category.display_dashboard_ind;",
									"    var serviceInd = category.actual_service_ind;",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"display_dashboard_ind must be 0 (is \" + displayInd.toString() + \")\", function(){",
									"        pm.expect(displayInd).to.be.eql(0);",
									"    });",
									"",
									"    pm.test(\"--> \" + testTitle + \"actual_service_ind must be 0 (is \" + serviceInd.toString() + \")\", function(){",
									"        pm.expect(serviceInd).to.be.eql(0);",
									"    });",
									"    ",
									"    pm.test(\"--> \" + testTitle + \"parent_id must be null\", function(){",
									"        pm.expect(category.parent_id).to.be.null;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}categories/",
							"host": [
								"{{url}}categories"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check services",
			"item": [
				{
					"name": "Get services",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "dc61c43a-7379-4971-9d50-db1c7052a406",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "46480638-046b-4e9c-824b-60976b7a63d2",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"number\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allElements = jsonData.services;",
									"var elementCount = 0;",
									"var elementMax = Math.min(10, allElements.length);",
									"//allElements.forEach(function(element) {",
									"for (var currentElement = 0; currentElement < elementMax; currentElement++) {",
									"    element = allElements[currentElement];",
									"    elementCount ++;",
									"    var testTitle = \"Service (\" + elementCount + \"): \" + element.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);",
									"    displayInd = element.display_dashboard_ind;",
									"    serviceInd = element.actual_service_ind;",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"display_dashboard_ind must be 0 or 1 (is \" + displayInd.toString() + \")\", function(){",
									"        pm.expect(displayInd).to.be.within(0, 1);",
									"    });",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"actual_service_ind must be 1 (is \" + serviceInd.toString() + \")\", function(){",
									"        pm.expect(serviceInd).to.be.eql(1);",
									"    });",
									"    ",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"parent_id must not be null\", function(){",
									"        pm.expect(element.parent_id).to.not.be.null;",
									"    });",
									"}",
									"",
									"//  Declare and initialize variables.",
									"var mspId = 0;",
									"var taxId = 0;",
									"var mspText = \"Payment - MSP\";",
									"var propTaxText = \"Other - PTAX\";",
									"",
									"//  Look for the MSP and Property Tax IDs.",
									"allElements.forEach(function(element) {",
									"    if (element.service_name === mspText) {",
									"        mspId = element.service_id;",
									"    }",
									"    if (element.service_name === propTaxText) {",
									"        taxId = element.service_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the MSP service.",
									"pm.test(mspText + ' id was ' + mspId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(mspId).to.not.be.eql(0);",
									"});",
									"",
									"//  Check that you found the Property Tax service.",
									"pm.test(propTaxText + ' id was ' + taxId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(taxId).to.not.be.eql(0);",
									"});",
									"",
									"//  Store these IDs for future use.",
									"postman.setEnvironmentVariable(\"service_MSP_id\", JSON.stringify(mspId));",
									"postman.setEnvironmentVariable(\"service_PropTax_id\", JSON.stringify(taxId));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}services/",
							"host": [
								"{{url}}services"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Clear queue for tests",
			"item": [
				{
					"name": "Delete citizen queue driver",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "34162034-4d6d-42c1-83f3-e2ad30429846",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1692a747-92fa-4818-b483-cbf5cdd9c9ae",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Delete citizens, if there are any.",
									"    if (citizenIds.length > 0) {",
									"        ",
									"        //  Set the current_client, to be deleted.",
									"        postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"        postman.setEnvironmentVariable(\"current_queue\", JSON.stringify(citizenIds));",
									"    ",
									"        if (currentCitizen.service_reqs.length === 0) {",
									"            postman.setNextRequest(\"Next citizen left\");",
									"            // //  Temporary kludge.  Citizen left not working, so add SR, then delete.",
									"            // postman.setNextRequest(\"Temporary add MSP service request\");",
									"        }",
									"        else {",
									"            postman.setNextRequest(\"Next citizen finish service\");",
									"        }",
									"    }",
									"    ",
									"    //  No more citizens.  Clear the current, queue variables.",
									"    else {",
									"        postman.setEnvironmentVariable(\"current_client\", JSON.stringify(\"\"));",
									"        postman.setEnvironmentVariable(\"current_queue\", JSON.stringify(\"\"));",
									"        postman.setNextRequest(\"End clear queue via healthz endpoint\");",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Next citizen finish service",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f91c26d4-218d-47f9-b044-7d4ba2330424",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "23421b29-16b0-48f6-9ffa-51fba8b316e7",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"var citizenToBeDeleted = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"var citizenData = jsonData.citizen;",
									"var testTitle = \"Check citizen finish service\";",
									"",
									"//  Make sure the response is valid.",
									"pm.test(testTitle + \": Response should have property 'citizen'\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"citizen\")).to.be.true;",
									"});",
									"pm.test(testTitle + \": Response should not have property 'message' indicating an error\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"message\")).to.be.false;",
									"});",
									"pm.test(testTitle + \": Citizen marked as finished should be citizen \" + citizenToBeDeleted.toString(), function(){",
									"    pm.expect(citizenData.citizen_id).to.be.eql(citizenToBeDeleted);",
									"});",
									"",
									"//  Go back to the delete citizen queue driver.",
									"postman.setNextRequest(\"Delete citizen queue driver\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Next citizen citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "56fffa90-62ec-4bbc-a6d7-c3c30108b187",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "9d4b6f11-63fa-4344-874f-24832473f1e3",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform checks.",
									"    pm.test(\"Check there are no citizens waiting\", function(){",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test(\"Citizen that left must be \" + currentCitizen.citizen_id.toString() + \" (is \" + currentCitizenId.toString(), function(){",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"}",
									"",
									"//  Go back to the delete citizen queue driver.",
									"postman.setNextRequest(\"Delete citizen queue driver\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Temporary add MSP service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "907712b8-c819-48c2-8289-8ac61ce92bfe",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1b8548d6-6f3b-444a-8460-831aa9d2f24b",
								"exec": [
									"//  Run create tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"var svcReq = jsonData.service_request;",
									"",
									"//  Set schema of the service_request property.",
									"var schema = {",
									"    \"properties\" : {",
									"        \"periods\" : {",
									"            \"type\" : \"array\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"sr_state\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"quantity\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"sr_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"citizen\" : {",
									"            \"type\" :[\"number\", \"object\"]",
									"        },",
									"        \"citizen_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"channel\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"channel_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        }",
									"    },",
									"    // \"required\" : [\"periods\", \"service_id\", \"sr_state_id\", \"service\"]",
									"    \"required\" : [\"periods\", \"service_id\", \"service\", \"sr_state\", \"quantity\", \"sr_id\",",
									"                  \"citizen\", \"citizen_id\", \"channel\", \"channel_id\"]",
									"};",
									"",
									"//  Make sure the response is valid.",
									"pm.test(\"Response has service_request property\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"service_request\")).to.be.true;",
									"});",
									"pm.test(\"Response has errors property\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"errors\")).to.be.true;",
									"});",
									"tests[\"Service_request property has correct schema\"] = tv4.validate(svcReq, schema);",
									"",
									"//  Go back to the clear citizen driver.",
									"postman.setNextRequest(\"Next citizen finish service\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_MSP_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : 1,\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "End clear queue via healthz endpoint",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "227ff033-42f3-4c65-94a0-e6b8c8974998",
								"exec": [
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is healthy'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "033a1ba1-e1c7-424d-8eb9-0b3cfc76df95",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen through queue (QT1)",
			"item": [
				{
					"name": "Check no citizens (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e3684ca4-7817-4886-8dfb-657a870601d4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dbe63186-5ce5-4ee7-a243-b20f74b3a9df",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Create citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "8a8e6a10-44cd-41fb-98a6-3aaaa03750f6",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2f874ecd-4430-4126-8400-2da5ce24b037",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    ",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "81020110-3b7d-4baa-8c21-f54264a41507",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "05e1f818-c501-4a7a-8906-6b5a995edf41",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "950bd85b-5c3e-4c85-90c9-ce76c0886714",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "807e201e-33e2-4a34-81fb-514dd859e435",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "721d063e-28e0-4c6a-af3c-340eb86b019a",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "bd90e9ec-e5d6-41ab-93d6-193c9bff461d",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add citizen to queue (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "fb5850b2-2a40-455e-b1a9-05315154d022",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "a61b0e2a-70fd-4272-bbed-a9abbe165877",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Pending\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Pending\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Waiting\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Waiting\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Invite specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "aa92c850-27e9-4a57-b21a-c85565fc2d67",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f43d3e14-d75f-4d2e-8cfd-5e50b031ad5b",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 3 (now three periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Invited\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Invited\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "15df760a-36be-4f24-bfa3-6c104c61cc26",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3a6cb2ee-b660-4650-b89f-dd28a90a7232",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (now four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "8099a729-ffba-4579-834c-028be411f47c",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "42d6d249-9699-4ed1-aa4e-7d6f179edf82",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must be null on service completion', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(null);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (still four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen begin-hold-finish (QT2)",
			"item": [
				{
					"name": "Check no citizens (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "1ff3ff7a-1105-4ec9-be2a-4e68fa927069",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0dff4e2f-d15a-41c3-a17f-9cdfd9be6d86",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Create citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "41334ad7-ab40-4a84-b54a-71c3ac1dd3f4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e6436547-aa8e-43e3-95d5-628e6ea5dc63",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    ",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}    ",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "12ca1b9c-e588-4908-8cc2-a0e54345f824",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8a50205e-446a-4249-aef5-c318230415fc",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "995c172e-f105-4283-8f7d-b6cfac1e27a2",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "c04d8cf3-72c2-438b-9088-23a16c686ad4",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2a6c1537-daa1-443e-874c-708e245a9535",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fe369d94-3750-4805-8efb-1823b7d0b518",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "763891a5-2997-4315-b149-0819f88bad82",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "feef5534-5bb4-43c1-9113-c3757dac58f4",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Place citizen on hold (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5b80f4ca-8af3-43a2-8bd6-873db346509c",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "a182a754-26c0-48a0-8c01-54a3d27ef110",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 3 (now three periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"On hold\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"On hold\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/place_on_hold/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"place_on_hold",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Get service requests (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c7af6063-6696-4dc8-9b01-e0af16b8155f",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4bfe4d7e-d30e-403f-b92e-118b44913953",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get periods for the first service request.",
									"    var allPeriods = allElements[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    var allPeriodCount = 0;",
									"",
									"    //  Find how many periods there are with null end time.",
									"    //  Also, check schema.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        ",
									"        //  Find the open period.",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"        ",
									"    });",
									"}    ",
									"",
									"//  If there are some service requests, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Perform tests.",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(allElements.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(allElements[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(allElements[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(allElements[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have three periods', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period state must be \"On hold\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"On hold\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/service_requests/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"service_requests",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Call citizen from hold (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "cb98d8fa-4bbf-45af-8895-024367a75255",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "5a35214d-b8a1-431e-a869-57530ae47b14",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (now four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "de519109-2ab1-4611-bb9d-ecdd7294c588",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "685a1356-3d34-4ec0-a0d5-c187d69ef672",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = allElements[0].service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must be null on service completion', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(null);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (still four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen leave after create (QT3)",
			"item": [
				{
					"name": "Check no citizens (QT3)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7415cc23-a682-4c8b-a310-bf6195867199",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3166e907-e1b7-4c5b-8572-2e0d495479fa",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Create citizen (QT3)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "3f13ad7e-b093-436a-a72d-264eda106e58",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ffd75091-6878-41d8-b845-9b2a278aa332",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Citizen left (QT3)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "01932bed-098b-436d-8d05-ca1206591cc4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2485e0cf-b35c-4a64-ac7c-a22b6cdd234d",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"    var citizenComment = postman.getEnvironmentVariable(\"citizen_comment\");",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = null;",
									"    if (currentCitizen.service_reqs.length !== 0) {",
									"        var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    }",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    if (allPeriods !== null) {",
									"        allPeriods.forEach(function(onePeriod) {",
									"            if (!onePeriod.time_end) {",
									"                openPeriod = onePeriod;",
									"                openPeriodCount++;",
									"            }",
									"        });",
									"    }",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be no active citizens in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen leave after waiting (QT4)",
			"item": [
				{
					"name": "Check no citizens (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b433157f-b570-48a7-80dd-fea5829a0961",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "48ce7a7b-9a27-4650-b1af-90a146e340b1",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Create citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "a146cdc9-d764-4807-823f-08c887a50546",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "36de8d88-7e80-4e8a-8e0c-ec9daf946c8c",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "6b8581b1-386d-462f-943d-90c51d262551",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "35353e52-2a23-46d2-904f-2b5385b9816b",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"     pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "da575903-9104-4618-8e75-63e319cdf5e9",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "371fdc5e-34c9-4f20-8eee-211b48b3cfcc",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "df989abe-993f-4a5b-be3d-0fee286b1515",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "da90df1a-f986-4aec-a7f2-bbfd5bb56d4d",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add citizen to queue (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "0df1c8c9-ed9b-4ddf-aa79-192baaebbf4f",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "28edb78c-eb69-4752-8a73-7d9f66ade300",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Pending\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Pending\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Waiting\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Waiting\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Citizen left (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "dd2005ab-df38-4a22-baf6-f36074839e73",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "7762ca05-d1eb-421e-868d-51241b6f0c82",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be no active citizens in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test(\"Citizen should have one service request\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Check no citizens (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7a6de5c1-5aa0-4ebb-b521-80d930b4b808",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "cc232ccc-6feb-41f7-90ad-c3ba603681d1",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check update service information (QT5)",
			"item": [
				{
					"name": "Check no citizens (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "a073e4c9-9a43-4f35-804a-3159e9d16545",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6c433f32-01c0-44b5-820f-61830fd49656",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"pm.test(\"There should be no citizens in the office\", function() {",
									"    pm.expect(allOK).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Create citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "93a81c51-5877-49a3-b260-78637ece97be",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "eb0e6e0a-1b4f-4a4b-8723-be22f02b45d8",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									"    pm.test(\"Current citizen comments should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.null;",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7b9412b7-d0f5-4c0b-aaf4-a9981066347c",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// };",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "887f4de2-faa9-4823-9881-875e4083f0b8",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"     pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ca74b9b1-d8ef-4715-aea9-69072e27a9c1",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "863e5a3b-92b0-4232-bcdc-441a2bdc4505",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "0256d5f7-5519-4498-8325-25b4fbe8ad0b",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "39b0491a-28c9-4489-a7fd-e6b579a55e68",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"",
									"    //  Save the service request ID for later.",
									"    var mySRId = allElements[0].service_reqs[0].sr_id;",
									"    postman.setEnvironmentVariable(\"current_sr_id\", JSON.stringify(mySRId));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ad091683-1e08-49bb-884d-5bf0b728fc2e",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "13e8de9c-cf1b-4815-a7d6-0a0e6da8e7ef",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Update quantity from 3 to 5 (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "cc25c94c-e332-4248-b169-9f398045f54f",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8ecdb0c9-28d6-4f06-8b99-bfac3e450890",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Updated service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(allElements[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"quantity\" : {{citizen_quantity_update}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Update service from PropTax to MSP (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "3819ba53-f23a-43b2-809b-0377c04f912f",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4330683c-9903-4ce6-b0ce-e796ae932ecb",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Updated service request service must be ' + citizenService, function() {",
									"        pm.expect(allElements[0].service_id).to.be.eql(citizenService);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_id\" : {{service_MSP_id}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "04ee47c7-7ee6-49e7-9acf-728d4b7029cf",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8374737d-f587-4b5d-b980-7479a6cf7456",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must be null on service completion', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(null);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (should be two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Setup Booking",
			"item": [
				{
					"name": "Setup-Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c3775a48-4ab8-4e7c-9f1c-bab8fb471360",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d445b87e-3dc6-4a1b-baee-5e3a882307d8",
								"exec": [
									"//  See if the use-prefix global has been set.  Use default if not.",
									"let usePrefix = '';",
									"if (pm.globals.get('use-prefix')) {",
									"    console.log(\"==> use-prefix exists\");",
									"    usePrefix = pm.globals.get('use-prefix');",
									"    console.log(\"    --> Prefix is: \" + usePrefix);",
									"    ",
									"    //  Set up all globals, using the correct prefix.",
									"    pm.globals.set('auth_url', pm.globals.get(usePrefix + 'auth_url'));",
									"    pm.globals.set('realm', pm.globals.get(usePrefix + 'realm'));",
									"    pm.globals.set('clientid', pm.globals.get(usePrefix + 'clientid'));",
									"    pm.globals.set('client_secret', pm.globals.get(usePrefix + 'client_secret'));",
									"    pm.globals.set('url', pm.globals.get(usePrefix + 'url'));",
									"}",
									"else {",
									"    console.log(\"==> use-prefix does not exist\");",
									"    console.log(\"    --> No default globals set.\");",
									"}",
									"",
									"//  If no maximum load time defined, set a default.",
									"if (!pm.globals.get('max_load_time')) {",
									"    console.log(\"==> max_load_time not present, default set.\");",
									"    pm.globals.set(\"max_load_time\", JSON.stringify(1503));",
									"}",
									"",
									"//  If no maximum response defined, set a default.",
									"if (!pm.globals.get('max_response_time')) {",
									"    console.log(\"==> max_response_time not present, default set.\");",
									"    pm.globals.set(\"max_response_time\", JSON.stringify(15005));",
									"}",
									"",
									"//  Display the values of all globals.",
									"console.log(\"\");",
									"console.log(\"==> Globals are:\");",
									"console.log(\"    --> auth_url:          \" + pm.globals.get(\"auth_url\"));",
									"console.log(\"    --> realm:             \" + pm.globals.get(\"realm\"));",
									"console.log(\"    --> clientid:          \" + pm.globals.get(\"clientid\"));",
									"console.log(\"    --> client_secret:     \" + pm.globals.get(\"client_secret\"));",
									"console.log(\"    --> url:               \" + pm.globals.get(\"url\"));",
									"console.log(\"    --> max_load_time:     \" + pm.globals.get(\"max_load_time\"));",
									"console.log(\"    --> max_response_time: \" + pm.globals.get(\"max_response_time\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Dummy data."
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "Authentication Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f7fd42b2-c79c-473d-8b5c-22dc8fa722e2",
								"exec": [
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to make sure that the access token field is not null",
									"pm.test(\"Access Token is not null\", function(){",
									"    var access_token = jsonData.access_token;",
									"    if (pm.expect(access_token).not.eql(null)){",
									"        pm.globals.set(\"token\", access_token);",
									"    }",
									"});",
									"//Test to make sure that the refresh token response field is not null",
									"pm.test(\"Refresh Token is not null\", function(){",
									"    var refresh_token = jsonData.refresh_token;",
									"    if (pm.expect(refresh_token).not.eql(null)){",
									"        pm.globals.set(\"refresh_token\", refresh_token);",
									"    }",
									"});",
									"//Test to make sure that expires in response field is not nullf",
									"pm.test(\"Expires In is not null\", function(){",
									"    var expires_in = jsonData.expires_in;",
									"    if (pm.expect(expires_in).not.eql(null)){",
									"        pm.globals.set(\"expires_in\", expires_in);",
									"    }",
									"});",
									"//Test to make sure that refresh expires in response fiels is not null",
									"pm.test(\"Refresh Expires In is not null\", function(){",
									"    var refresh_expires_in = jsonData.refresh_expires_in;",
									"    if (pm.expect(refresh_expires_in).not.eql(null)){",
									"        pm.globals.set(\"refresh_expires_in\", refresh_expires_in);",
									"    }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=password&client_id={{clientid}}&username={{userid}}&password={{password}}&client_secret={{client_secret}}"
						},
						"url": {
							"raw": "{{auth_url}}/auth/realms/{{realm}}/protocol/openid-connect/token?Content-Type=application/x-www-form-urlencoded",
							"host": [
								"{{auth_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							],
							"query": [
								{
									"key": "Content-Type",
									"value": "application/x-www-form-urlencoded"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Auth-First",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e9193aa3-b3e7-45ef-8e64-c1b0c341aea7",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_first\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n\nconst echoPostRequest = {\n  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n          + '&username=' + userid \n          + '&password=' + password\n          + '&client_secret=' + client_secret\n  }\n};\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    if (jsonData.hasOwnProperty('access_token')) {\n    \tpm.globals.set(\"token\", jsonData.access_token);\n\t    pm.globals.set(\"refresh_token\", jsonData.refresh_token);\n\t    console.log(err ? err : res.json());\n\t} else {\n\t    pm.globals.set(\"token\", 0);\n\t    pm.globals.set(\"refresh_token\", 0);\n\t    pm.globals.set(\"token_expires\", 0);\n\t    pm.globals.set(\"refresh_token_expires\", 0);\n\t}\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Basic-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5925f13b-c1d0-4567-b4b8-528ea3b28147",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"basic_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  If no maximum response defined, set a default.\nresponse_max = 0;\nif (globals.response_max) {\n    response_max = JSON.parse(globals.response_max);\n}\nelse {\n    response_max = 5009;\n    pm.globals.set(\"response_max\", JSON.stringify(response_max));\n};\n\n//  Get the max response time allowed.\npm.test('Response time less than ' + response_max.toString() + 'ms', function(){\n    pm.expect(pm.response.responseTime).to.be.below(response_max);\n});\n\npm.test(\"Response code for request is 200\", function(){\n    pm.response.to.have.status(200);\n});\npm.test('Response header should have Content-Type of application/json', function() {\n    pm.response.to.have.header('content-type', 'application/json');\n});\npm.test('Response body be in JSON format', function() {\n    pm.response.to.be.json; \n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Exam-Type-Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b63d10d4-bca6-4297-94c1-877ba88db286",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"init_exam_type_data\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Finds an exam name in the JSON list allTypes of exam types.\nfunction find_exam(input_exam_name, allTypes) {\n\texam_id_value = -1;\n\n    //  Loop to look for the input exam name.\n    if (allTypes) {\n        allTypes.forEach(function(type) {\n            if ((type.exam_type_name) == input_exam_name) {\n            exam_id_value = type.exam_type_id;\n            }\n        });\n    }\n    \n    //  If the exam wasn't found, set it to be the first exam.\n    if (exam_id_value == -1) {\n        exam_id_value = allTypes[0].exam_type_id;\n    }\n\n    //  Return the exam_id_type of the input exam name.\n    return exam_id_value;\n}\n\n//  Get the list of all possible exam types.\nallTypes = null;\nvar jsonData = JSON.parse(responseBody);\nif (jsonData.hasOwnProperty(\"exam_types\")) {\n\tallTypes = jsonData.exam_types;\n}\n\nexam_array = [];\nexam_array.push({name: \"Pesticide\", weight: 40.2, id: find_exam(\"Pesticide\", allTypes)});\nname = \"IPSE - 4HR Single Exam\";\nexam_array.push({name: name, weight: exam_array[0].weight + 14.5, id: find_exam(name, allTypes)});\nname = \"SLE - 3HR Group Exam\";\nexam_array.push({name: name, weight: exam_array[1].weight + 7.4, id: find_exam(name, allTypes)});\nname = \"COFQ - 3HR Group Exam\";\nexam_array.push({name: name, weight: exam_array[2].weight + 5.8, id: find_exam(name, allTypes)});\nname = \"IPSE - 4HR Group Exam\";\nexam_array.push({name: name, weight: exam_array[3].weight + 5.7, id: find_exam(name, allTypes)});\nname = \"COFQ - 3HR Single Exam\";\nexam_array.push({name: name, weight: exam_array[4].weight + 5.5, id: find_exam(name, allTypes)});\nname = \"Monthly Session Exam\";\nexam_array.push({name: name, weight: exam_array[5].weight + 3.8, id: find_exam(name, allTypes)});\nname = \"SLE - 3HR Single Exam\";\nexam_array.push({name: name, weight: exam_array[6].weight + 3.5, id: find_exam(name, allTypes)});\nname = \"Angling Guide Outfitter\";\nexam_array.push({name: name, weight: exam_array[7].weight + 2.4, id: find_exam(name, allTypes)});\nname = \"IPSE - 5HR Single Exam - Time Extension\";\nexam_array.push({name: name, weight: exam_array[8].weight + 2.3, id: find_exam(name, allTypes)});\nname = \"Exam Booking - 3 Hour Miscellaneous\";\nexam_array.push({name: name, weight: exam_array[9].weight + 1.7, id: find_exam(name, allTypes)});\n\n//  Store the initialized exam data for later use.\npostman.setEnvironmentVariable(\"exam_array_data\", JSON.stringify(exam_array));"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Exam-Get-Random",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "eb5f79be-0dbb-4596-b8e4-ee55918c3fe1",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"create_random_functions\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Function returns a weighted randomized exam type index.\nfunction get_random_index(exam_array) {\n\n    //  Generate a random number up to the maximum weight allowed.\n    random_number = Math.floor(Math.random() * exam_array[exam_array.length - 1].weight);\n    \n    //  Get the index of the exam type corresponding to that weight.\n    index = get_index(random_number, exam_array);\n\n    //  Return the index.\n    return index;\n}\n\n//  Based on a random number, turns it into a weighted randomized exam type index.\nfunction get_index(random_value, exam_array) {\n    index = 0;\n    var i;\n    for (i = 0; i < exam_array.length; i++) {\n        if (random_value <= exam_array[i].weight) {\n            index = i;\n            break;\n        }\n    }\n    \n    return index;\n}\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Exam-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d3769400-539c-4c6d-9433-dd92e135c3f5",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"exam_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar examSchema = {\n    \"type\": \"object\",\n    \"properties\": {\n        \"exam\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"booking_id\": {},\n                \"deleted_date\": {},\n                \"event_id\": {\"type\": \"string\"},\n                \"exam_id\": {\"type\": \"number\"},\n                \"exam_method\": {\"type\": \"string\"},\n                \"exam_name\": {\"type\": \"string\"},\n                \"exam_received_date\": {},\n                \"exam_returned_tracking_number\": {},\n                \"exam_type\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"exam_color\": {\"type\": \"string\"},\n                        \"exam_type_id\": {\"type\": \"number\"},\n                        \"exam_type_name\": {\"type\": \"string\"},\n                        \"group_exam_ind\": {\"type\": \"number\"},\n                        \"ita_ind\": {\"type\": \"number\"},\n                        \"method_type\": {\"type\": \"string\"},\n                        \"number_of_hours\": {\"type\": \"number\"},\n                        \"number_of_minutes\": {\"type\": [\"number\", \"null\"]},\n                        \"pesticide_exam_ind\": {\"type\": \"number\" }\n                    },\n                    \"required\": [\"exam_color\", \"exam_type_id\", \"exam_type_name\", \"group_exam_ind\", \"ita_ind\", \"method_type\", \"number_of_hours\", \"number_of_minutes\", \"pesticide_exam_ind\"]\n                },\n                \"exam_type_id\": {\"type\": \"number\"},\n                \"exam_written_ind\": {\"type\": \"number\"},\n                \"examinee_name\": {\"type\": \"string\"},\n                \"expiry_date\": {\"type\": [\"string\", \"null\"]},\n                \"notes\": {\"type\": \"string\"},\n                \"number_of_students\": {\"type\": \"number\"},\n                \"office\":{\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"appointments_enabled_ind\": {\"type\": \"number\"},\n                        \"exams_enabled_ind\": {\"type\": \"number\"},\n                        \"office_id\": {\"type\": \"number\"},\n                        \"office_name\": {\"type\": \"string\"},\n                        \"office_number\": {\"type\": \"number\" },\n                        \"timezone\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"timezone_id\": {\"type\" : \"number\"},\n                                \"timezone_name\": {\"type\": \"string\"}\n                            },\n                            \"required\": [\"timezone_id\", \"timezone_name\"]\n                        },\n                    },\n                    \"required\": []\n                },\n                \"office_id\": {\"type\": \"number\"},\n                \"offsite_location\": {},\n                \"session_number\": {\"type\": [\"number\", \"null\"]},\n                \"booking\": {}\n            },\n            \"required\": [\"booking\", \"booking_id\", \"deleted_date\", \"event_id\", \"exam_id\", \"exam_method\", \"exam_name\", \"exam_received_date\", \"exam_returned_tracking_number\", \"exam_type\", \"exam_type_id\", \"exam_written_ind\", \"examinee_name\", \"expiry_date\", \"notes\", \"number_of_students\", \"office\", \"office_id\", \"offsite_location\", \"session_number\"]\n        }\n    },\n    \"required\": [\"exam\"]\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Exam Schema\", function(){\n    pm.expect(tv4.validate(jsonData, examSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Exam-Data-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0e4dafdd-d201-4836-b696-911aad328547",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"exam_data_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Make sure that jsonData has an exam property.\npm.test(\"Response should have exam property\", function(){\n    pm.expect(jsonData.hasOwnProperty(\"exam\")).to.be.true;\n});\n\n//  If jsonData has exam property, check data.\nif (jsonData.hasOwnProperty(\"exam\")) {\n\n    //Test to see if Event ID field remains unchanged\n    pm.test(\"Validate Event Id has expected value\", function(){\n        pm.expect(jsonData.event_id === environment.event_id);\n    });\n\n    //Test to see if exam method field remains unchanged\n    pm.test(\"Validate exam method has expected value\", function(){\n        pm.expect(jsonData.exam_method === environment.exam_method);\n    });\n\n    //Test to see if exam name field remains unchanged\n    pm.test(\"Validate exam name has expected value\", function(){\n        pm.expect(jsonData.exam_name === environment.exam_name);\n    });\n\n    //Test to see if exam type field remains unchanged\n    pm.test(\"Validate exam type id has expected value\", function(){\n        pm.expect(jsonData.exam_type_id === environment.random_exam_type_id);\n    });\n\n    //Test to see if exam written indicator field remains unchanged\n    pm.test(\"Validate exam written indicator has expected value\", function(){\n        pm.expect(jsonData.exam_written_ind === environment.exam_written_ind);\n    });\n\n    //Test to see if examinee name field remains unchanged\n    pm.test(\"Validate examinee name has expected value\", function(){\n        pm.expect(jsonData.examinee_name === environment.examinee_name);\n    });\n\n    //Test to see if notes field remains unchanged\n    pm.test(\"Validate notes has expected value\", function(){\n        pm.expect(jsonData.notes === environment.notes);\n    });\n\n    //Test to see if number of students field remains unchanged\n    pm.test(\"Validate number of students has expected value\", function(){\n        pm.expect(jsonData.number_of_students === environment.number_of_students);\n    });\n\n    //Test to see if office id remains unchanged\n    pm.test(\"Validate office id has expected value\", function(){\n        pm.expect(jsonData.office_id === environment.current_office_id);\n    });\n\n    //Test to see if offsite location is expected\n    pm.test(\"Validate offsite location has expected value\", function(){\n        pm.expect(jsonData.offsite_location === environment.offsite_location);\n    });\n}\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Exam-List-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c4242460-e84c-416a-bcb8-fd65ef5aa5be",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"exam_schema_list_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar examSchema = {\n    \"type\": \"object\",\n    \"properties\": {\n        \"exams\": {\n            \"type\": \"array\",\n            \"properties\": {\n                \"booking_id\": {},\n                \"deleted_date\": {},\n                \"event_id\": {\"type\": \"string\"},\n                \"exam_id\": {\"type\": \"number\"},\n                \"exam_method\": {\"type\": \"string\"},\n                \"exam_name\": {\"type\": \"string\"},\n                \"exam_received_date\": {},\n                \"exam_returned_tracking_number\": {},\n                \"exam_type\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"exam_color\": {\"type\": \"string\"},\n                        \"exam_type_id\": {\"type\": \"number\"},\n                        \"exam_type_name\": {\"type\": \"string\"},\n                        \"group_exam_ind\": {\"type\": \"number\"},\n                        \"ita_ind\": {\"type\": \"number\"},\n                        \"method_type\": {\"type\": \"string\"},\n                        \"number_of_hours\": {\"type\": \"number\"},\n                        \"number_of_minutes\": {\"type\": \"number\"},\n                        \"pesticide_exam_ind\": {\"type\": \"number\" }\n                    },\n                    \"required\": [\"exam_color\", \"exam_type_id\", \"exam_type_name\", \"group_exam_ind\", \"ita_ind\", \"method_type\", \"number_of_hours\", \"number_of_minutes\", \"pesticide_exam_ind\"]\n                },\n                \"exam_type_id\": {\"type\": \"number\"},\n                \"exam_written_ind\": {\"type\": \"number\"},\n                \"examinee_name\": {\"type\": \"string\"},\n                \"expiry_date\": {\"type\": [\"string\", \"null\"]},\n                \"notes\": {\"type\": \"string\"},\n                \"number_of_students\": {\"type\": \"number\"},\n                \"office\":{\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"appointments_enabled_ind\": {\"type\": \"number\"},\n                        \"exams_enabled_ind\": {\"type\": \"number\"},\n                        \"office_id\": {\"type\": \"number\"},\n                        \"office_name\": {\"type\": \"string\"},\n                        \"office_number\": {\"type\": \"number\" },\n                        \"timezone\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"timezone_id\": {\"type\" : \"number\"},\n                                \"timezone_name\": {\"type\": \"string\"}\n                            },\n                            \"required\": [\"timezone_id\", \"timezone_name\"]\n                        },\n                    },\n                    \"required\": []\n                },\n                \"office_id\": {\"type\": \"number\"},\n                \"offsite_location\": {},\n                \"session_number\": {\"type\": [\"number\", \"null\"]},\n                \"booking\": {}\n            },\n            \"required\": [\"booking\", \"booking_id\", \"deleted_date\", \"event_id\", \"exam_id\", \"exam_method\", \"exam_name\", \"exam_received_date\", \"exam_returned_tracking_number\", \"exam_type\", \"exam_type_id\", \"exam_written_ind\", \"examinee_name\", \"expiry_date\", \"notes\", \"number_of_students\", \"office\", \"office_id\", \"offsite_location\", \"session_number\"]\n        }\n    },\n    \"required\": [\"exams\"]\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Exam List Schema\", function(){\n    pm.expect(tv4.validate(jsonData, examSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Booking-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7e1f9be8-76f7-43ab-bbf3-c69ba0f5a8e0",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"booking_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar bookingSchema = {\n    \"type\": \"object\",\n    \"properties\": {\n        \"booking\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"blackout_flag\": {\"type\": \"string\"},\n            \"blackout_notes\": {\"type\": [\"string\", \"null\"]},\n            \"booking_contact_information\": {\"type\": [\"string\", \"null\"]},\n            \"booking_id\": {\"type\": \"number\"},\n            \"booking_name\": {\"type\": [\"string\", \"null\"]},\n            \"end_time\": {\"type\": \"string\"},\n            \"fees\": {\"type\": \"string\"},\n            \"invigilators\": {\"type\": \"array\"},\n            \"office\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"appointments_enabled_ind\": {\"type\": \"number\"},\n                    \"exams_enabled_ind\": {\"type\": \"number\"},\n                    \"office_id\": {\"type\": \"number\"},\n                    \"office_name\": {\"type\": \"string\"},\n                    \"office_number\": {\"type\": \"number\"},\n                    \"timezone\": {}\n                },\n                \"required\": [\"appointments_enabled_ind\", \"exams_enabled_ind\", \"office_id\", \"office_name\", \"office_number\", \"timezone\"]\n            },\n            \"office_id\": {\"type\": \"number\"},\n            \"recurring_uuid\": {\"type\": [\"string\", \"null\"]},\n            \"room\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"capacity\": {\"type\": \"number\"},\n                    \"color\": {\"type\": \"string\"},\n                    \"deleted\": {\"type\": [\"string\", \"null\"]},\n                    \"room_id\": {\"type\": \"number\"},\n                    \"room_name\": {\"type\": \"string\"}\n                },\n                \"required\": [\"capacity\", \"color\", \"room_id\", \"room_name\", \"deleted\"]\n            },\n            \n            \"room_id\": {\"type\": \"number\"},\n            \"sbc_staff_invigilated\": {\"type\": \"number\"},\n            \"shadow_invigilator_id\": {\"type\": [\"number\", \"null\"]},\n            \"start_time\": {\"type\": \"string\"}\n          },\n          \"required\": [\"blackout_flag\", \"blackout_notes\", \"booking_contact_information\", \"booking_id\",\n                       \"booking_name\", \"end_time\", \"fees\", \"invigilators\", \"office\", \"office_id\",\n                       \"recurring_uuid\", \"room\", \"room_id\", \"sbc_staff_invigilated\", \"shadow_invigilator_id\",\n                       \"start_time\"]\n        },\n        \"errors\": { \"type\": \"object\" }\n    },\n    \"required\": [\"booking\", \"errors\"]\n}\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Booking Schema\", function(){\n    pm.expect(tv4.validate(jsonData, bookingSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Booking-Data-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c23e41db-809c-4a3e-911b-6d878736e197",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"booking_data_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Make sure that jsonData has an booking property.\npm.test(\"Response should have booking property\", function(){\n    pm.expect(jsonData.hasOwnProperty(\"booking\")).to.be.true;\n});\n\n//  If jsonData has booking property, check data.\nif (jsonData.hasOwnProperty(\"booking\")) {\n\n    //Test to see if booking name has expected value\n    pm.test(\"Validate Booking Name has expected value\", function(){\n        pm.expect(jsonData.booking_name === environment.booking_name);\n    });\n\n    //Test to see if start time has expected value\n    pm.test(\"Validate start time has expected value\", function(){\n        pm.expect(jsonData.start_time === environment.start_time);\n    });\n\n    //Test to see if end time has expected value\n    pm.test(\"Validate end time has expected value\", function(){\n        pm.expect(jsonData.end_time === environment.end_time);\n    });\n\n    //Test to see if room id has expected value\n    pm.test(\"Validate room id has expected value\", function(){\n        pm.expect(jsonData.room_id === environment.room_id_1);\n    });\n\n    //Test to see if fees field has expected value\n    pm.test(\"Validate fees has expected value\", function(){\n        pm.expect(jsonData.fees === environment.fees);\n    });\n\n    //Test to see if office id field has expected value\n    pm.test(\"Validate office id has expected value\", function(){\n        pm.expect(jsonData.office_id === environment.current_office_id);\n    });\n}\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Booking-List-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f39f5d29-910a-42fd-a4b5-a3113d3fca95",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"booking_list_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var bookingSchema = {\n    \"type\": \"object\",\n    \"properties\": {\n        \"bookings\": {\n            \"type\": \"array\",\n            \"properties\": {\n                \"booking_contact_information\": {},\n                \"booking_id\": {\"type\": \"number\"},\n                \"booking_name\": {\"type\": \"string\"},\n                \"end_time\": {\"type\": \"string\"},\n                \"fees\": {\"type\": \"string\"},\n                \"invigilator\": {},\n                \"invigilator_id\": {},\n                \"office\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"appointments_enabled_ind\": {\"type\": \"number\"},\n                        \"exams_enabled_ind\": {\"type\": \"number\"},\n                        \"office_id\": {\"type\": \"number\"},\n                        \"office_name\": {\"type\": \"string\"},\n                        \"office_number\": {\"type\": \"number\"},\n                        \"sb_id\": {\"type\": \"number\"},\n                        \"timezone\": {}\n                    },\n                    \"required\": [\"appointments_enabled_ind\", \"exams_enabled_ind\", \"office_id\", \"office_name\", \"office_number\", \"sb\", \"sb_id\"]\n                },\n                \"office_id\": {\"type\": \"number\"},\n                \"room\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"capacity\": {\"type\": \"number\"},\n                        \"color\": {\"type\": \"string\"},\n                        \"room_id\": {\"type\": \"number\"},\n                        \"room_name\": {\"type\": \"string\"}\n                    },\n                    \"required\": [\"capacity\", \"color\", \"room_id\", \"room_name\"]\n                },\n                \"room_id\": {\"type\": \"number\"},\n                \"start_time\": {\"type\": \"string\"},\n            },\n            \"required\": [\"booking_contact_information\", \"booking_id\", \"booking_name\", \"end_time\", \"fees\", \"room\", \"room_id\", \"start_time\", \"invigilator_id\", \"office\", \"office_id\"]\n        },\n        \"errors\": {\n            \"type\": \"object\",\n            \"properties\": {}\n        }\n    },\n    \"required\": [\"bookings\", \"errors\"]\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Booking List Schema\", function(){\n    pm.expect(tv4.validate(jsonData, bookingSchema)).to.be.true;\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Appointment-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "37e352bc-6055-4734-b698-647df20e36d2",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"appointment_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar appointmentSchema = {\n    \"type\": \"object\", \n    \"properties\": {\n        \"appointment\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"appointment_id\": {\"type\": \"number\"},\n                \"checked_in_time\": {\"type\": [\"string\", \"null\"]},\n                \"citizen_name\": {\"type\": \"string\"},\n                \"comments\": {\"type\": \"string\"},\n                \"contact_information\": {\"type\": [\"string\", \"null\"]},\n                \"end_time\": {\"type\": \"string\"},\n                \"office\": {\"type\": \"number\"},\n                \"office_id\": {\"type\": \"number\"},\n                \"service_id\": {\"type\": \"number\"},\n                \"start_time\": {\"type\": \"string\"},\n                \"blackout_flag\": {\"type\": \"string\"},\n                \"citizen_id\": {\"type\": \"number\"},\n                \"online_flag\": {\"type\": \"boolean\"},\n                \"recurring_uuid\": {\"type\": [\"null\", \"string\"]},\n                \"service\": {\"type\": \"number\"}\n            },\n            \"required\": [\"appointment_id\", \"checked_in_time\", \"citizen_name\", \"comments\", \"contact_information\", \"end_time\", \"office\",\n                         \"office_id\", \"service_id\", \"start_time\", \"blackout_flag\", \"citizen_id\", \"online_flag\", \"recurring_uuid\", \"service\"],\n            \"errors\": {}\n        }\n    },\n    \"required\": [\"appointment\"],\n    \"errors\": {}\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Appointments Schema\", function(){\n    pm.expect(tv4.validate(jsonData, appointmentSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Appointment-Data-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "86e2072f-f329-4c4f-ad5b-ebbb8e44beb6",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"appointment_data_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Make sure that jsonData has an appointment property.\npm.test(\"Response should have appointment property\", function(){\n    pm.expect(jsonData.hasOwnProperty(\"appointment\")).to.be.true;\n});\n\n//  If jsonData has booking property, check data.\nif (jsonData.hasOwnProperty(\"appointment\")) {\n\n    //Test to see if service id has expected value\n    pm.test(\"Validate Service ID has expected value\", function(){\n        pm.expect(jsonData.service_id === environment.service_id);\n    });\n\n    //Test to see if office id has expected value\n    pm.test(\"Validate office id has expected value\", function(){\n        pm.expect(jsonData.office_id === environment.current_office_id);\n    });\n\n    //Test to see if start time has expected value\n    pm.test(\"Validate start time has expected value\", function(){\n        pm.expect(jsonData.start_time === environment.start_time);\n    });\n\n    //Test to see if end time has expected value\n    pm.test(\"Validate end time has expected value\", function(){\n        pm.expect(jsonData.end_time === environment.end_time);\n    });\n\n    //Test to see if category has expected value\n    pm.test(\"Validate category has expected value\", function(){\n        pm.expect(jsonData.category === environment.category);\n    });\n\n    //Test to see if comments field has expected value\n    pm.test(\"Validate comments has expected value\", function(){\n        pm.expect(jsonData.comments === environment.comments);\n    });\n\n    //Test to see if citizen name field has expected value\n    pm.test(\"Validate citizen name has expected value\", function(){\n        pm.expect(jsonData.citizen_name === environment.citizne_name);\n    });\n}\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Appointment-List-Schema-Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b64bb65d-b0b9-42a7-bf97-cc6b45f0a580",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"appointment_list_schema_check\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Define the JSON Schema expected in response\nvar appointmentSchema = {\n    \"type\": \"object\", \n    \"properties\": {\n        \"appointments\": {\n            \"type\": \"array\",\n            \"properties\": {\n                \"appointment_id\": {\"type\": \"number\"},\n                \"checked_in_time\": {\"type\": [\"string\", \"null\"]},\n                \"citizen_name\": {\"type\": \"string\"},\n                \"comments\": {\"type\": \"string\"},\n                \"contact_information\": {},\n                \"end_time\": {\"type\": \"string\"},\n                \"office\": {\"type\": \"number\"},\n                \"office_id\": {\"type\": \"number\"},\n                \"service_id\": {\"type\": \"number\"},\n                \"start_time\": {\"type\": \"string\"},\n                \n            },\n            \"required\": [\"appointment_id\", \"checked_in_time\", \"citizen_name\", \"comments\", \"contact_information\", \"end_time\", \"office\", \"office_id\", \"service_id\", \"start_time\"],\n            \"errors\": {}\n        }\n    },\n    \"required\": [\"appointments\"],\n    \"errors\": {}\n};\n\n//Test to see if response schema is valid\npm.test(\"Validate Response Appointment List Schema\", function(){\n    pm.expect(tv4.validate(jsonData, appointmentSchema)).to.be.true;\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "Who am I TheQ",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5add341a-90d7-4a2a-9849-9a15e5e9bd5a",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3931e33e-5154-48f1-b482-63da28d884c6",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Make sure the CSR schema is OK.",
									"eval(environment.csr_schema_check)",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"if (jsonData.hasOwnProperty(\"csr\")) {",
									"\tcurrentOfficeId = jsonData.csr.office_id;",
									"\tcurrentOfficeNumber = jsonData.csr.office.office_number;",
									"\tcurrentCsrId = jsonData.csr.csr_id;",
									"    postman.setEnvironmentVariable(\"current_office_id\", currentOfficeId);",
									"    postman.setEnvironmentVariable(\"current_office_number\", currentOfficeNumber);",
									"    postman.setEnvironmentVariable(\"current_csr_id\", currentCsrId);",
									"};",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Room IDs",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "de5df90b-8788-43cc-9c52-067452cf3eaf",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var roomSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"rooms\": {",
									"            \"type\": \"array\",",
									"            \"properties\": {",
									"                \"capacity\": {\"type\": \"number\"},",
									"                \"color\": {\"type\": \"string\"},",
									"                \"office\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"office_id\": {\"type\": \"number\"},",
									"                        \"office_name\": {\"type\": \"string\"},",
									"                        \"office_number\": {\"type\": \"number\"},",
									"                        \"sb\": {",
									"                            \"type\": \"object\",",
									"                            \"properties\": {",
									"                                \"sb_id\": {\"type\": \"number\"},",
									"                                \"sb_type\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"sb_id\", \"sb_type\"]",
									"                        },",
									"                    \"sb_id\": {\"type\": \"number\"}                        ",
									"                    },",
									"                    \"required\": [\"office_id\", \"office_name\", \"office_number\", \"sb\", \"sb_id\"]",
									"                }",
									"            },",
									"            \"required\": [\"capacity\", \"color\", \"office\", \"room_id\", \"room_name\"]",
									"        }",
									"    }",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get the max response time allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"",
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response Room Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, roomSchema)).to.be.true;",
									"});",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"if (jsonData.hasOwnProperty(\"rooms\")) {",
									"    console.log(\"==> Rooms\");",
									"    room_id_1 = jsonData.rooms[0].room_id;",
									"    room_id_2 = room_id_1;",
									"    if (jsonData.rooms.length > 1) {",
									"        room_id_2 = jsonData.rooms[1].room_id;",
									"    }",
									"    postman.setEnvironmentVariable(\"room_id_1\", JSON.stringify(room_id_1.toString()));",
									"    postman.setEnvironmentVariable(\"room_id_2\", JSON.stringify(room_id_2.toString()));",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "c2c04d58-b036-4440-9018-8b857608558b",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}rooms/",
							"host": [
								"{{url}}rooms"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Service IDs",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "94aef7fe-8162-46ac-abb1-66a567d93966",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "49673f0e-1524-45b2-847e-71648489dc92",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"services\": {",
									"            \"type\": \"array\",",
									"            \"properties\": {",
									"                \"display_dashboard_ind\" : {",
									"                    \"type\" : \"number\"",
									"                },",
									"                \"deleted\" : {",
									"                    \"type\" : [\"object\", \"null\"]",
									"                },",
									"                \"actual_service_ind\" : {",
									"                    \"type\" : \"number\"",
									"                },",
									"                \"service_id\" : {",
									"                    \"type\" : [\"number\", \"object\"]",
									"                },",
									"                \"service_code\" : {",
									"                    \"type\" : \"string\"",
									"                },",
									"                \"prefix\" : {",
									"                    \"type\" : \"string\"",
									"                },",
									"                \"service_name\" : {",
									"                    \"type\" : \"string\"",
									"                },",
									"                \"parent_id\" : {",
									"                    \"type\" : [\"object\", \"number\", \"null\" ]",
									"                },",
									"                \"service_desc\" : {",
									"                    \"type\" : \"string\"",
									"                }",
									"            },",
									"            \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                          \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"        }",
									"    }",
									"};",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Service  Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
									"});",
									"",
									"//  Loop to validate schema of each channel.",
									"var allElements = jsonData.services;",
									"var elementCount = 0;",
									"var elementMax = Math.min(10, allElements.length);",
									"//allElements.forEach(function(element) {",
									"for (var currentElement = 0; currentElement < elementMax; currentElement++) {",
									"    element = allElements[currentElement];",
									"    elementCount ++;",
									"    var testTitle = \"Service (\" + elementCount + \"): \" + element.service_name;",
									"    pm.test(\"Validate Schema for \" + testTitle, function(){",
									"        pm.expect(tv4.validate(element, schema)).to.be.true;",
									"    });",
									"    ",
									"    //  Test the authenticate response.",
									"    pm.test(\"--> \" + testTitle + \" dashboard_ind must be 0 or 1\", function() {",
									"        pm.expect(element.display_dashboard_ind).to.be.within(0,1);",
									"    });",
									"    pm.test(\"--> \" + testTitle + \" actual_service_ind must be 1\", function() {",
									"        pm.expect(element.actual_service_ind).to.be.eql(1);",
									"    });",
									"    pm.test(\"--> \" + testTitle + \" parent_id must not be null\", function() {",
									"        pm.expect(element.parent_id).to.not.be.null;",
									"    });",
									"}",
									"",
									"//  Declare and initialize variables.",
									"var mspId = 0;",
									"var taxId = 0;",
									"var mspText = \"Payment - MSP\";",
									"var propTaxText = \"Other - PTAX\";",
									"",
									"//  Look for the MSP and Property Tax IDs.",
									"allElements.forEach(function(element) {",
									"    if (element.service_name === mspText) {",
									"        mspId = element.service_id;",
									"    }",
									"    if (element.service_name === propTaxText) {",
									"        taxId = element.service_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the service IDs.",
									"pm.test(\"The \" + mspText + \" service ID (\" + mspId.toString() + \") should not equal 0\", function() {",
									"    pm.expect(mspId).to.not.be.eql(0);",
									"});",
									"",
									"pm.test(\"The \" + propTaxText + \" service ID (\" + taxId.toString() + \") should not equal 0\", function() {",
									"    pm.expect(taxId).to.not.be.eql(0);",
									"});",
									"",
									"//  Store these IDs for future use.",
									"postman.setEnvironmentVariable(\"service_MSP_id\", JSON.stringify(mspId));",
									"postman.setEnvironmentVariable(\"service_PropTax_id\", JSON.stringify(taxId));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}services/",
							"host": [
								"{{url}}services"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check app health",
			"item": [
				{
					"name": "Check healthz driver Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8b9e1b7-1487-496f-a6f1-0465582b4b5b",
								"exec": [
									"//  Set health response time variable.",
									"max_response_time = 1500;",
									"health_tries = 15;",
									"counter = 1;",
									"postman.setEnvironmentVariable(\"max_response_time\", JSON.stringify(max_response_time));",
									"postman.setEnvironmentVariable(\"health_tries\", JSON.stringify(health_tries));",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is health'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_response_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint Booking\");",
									"}",
									"    ",
									"//  Response time is too long.  Try again, give pod a chance to spin up.",
									"else {",
									"    postman.setNextRequest(\"Check the healthz endpoint Booking\");",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "49c4072c-03e7-4f6e-9ef7-eb29781c84b6",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the healthz endpoint Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "807af900-80ba-4c20-8217-04e18774dbf0",
								"exec": [
									"//  Get the maximum response time allowed.",
									"max_load_time = JSON.parse(globals.max_load_time);",
									"",
									"//  Get and update variables.",
									"health_tries = JSON.parse(postman.getEnvironmentVariable(\"health_tries\"));",
									"counter = JSON.parse(postman.getEnvironmentVariable(\"health_counter\")) + 1;",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Health Driver: Try \" + counter.toString() + \": Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is health'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_load_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint Booking\");",
									"}",
									"    ",
									"//  Response time is too long.",
									"else {",
									"    ",
									"    //  You haven't reached your maximum tries yet.  Try again.",
									"    if (counter < health_tries) {",
									"        postman.setNextRequest(\"Check the healthz endpoint Booking\");",
									"    }",
									"    ",
									"    //   You have reached the maximum.  An error, go to next test.",
									"    else {",
									"        pm.test(\"Response should be below \" + max_load_time.toString() + ' in ' + health_tries.toString() + ' tries.', function() {",
									"            pm.expect(counter).to.be.below(health_tries);",
									"        });",
									"        postman.setNextRequest(\"Check the readyz endpoint Booking\");",
									"    }",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "aa61b5a4-f6b5-4f26-8085-bbfedde0fe88",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the readyz endpoint Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "fb2ece26-95fe-41b6-9f0c-8dc691595c38",
								"exec": [
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is ready'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is ready');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "8944b412-5c23-4c62-b8ae-282d6bf5e886",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}readyz/",
							"host": [
								"{{url}}readyz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Checks the application health by calling the healthz and readyz endpoints",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Get Exam Types",
			"item": [
				{
					"name": "Exam Type List",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7224e78a-c1bd-4855-8189-3298c506b8ae",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var examTypeSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"type\": \"object\",",
									"        \"properties\": {",
									"            \"exam_color\": {\"type\": \"string\"},",
									"            \"exam_type_id\": {\"type\": \"number\"},",
									"            \"exam_type_name\": {\"type\": \"string\"},",
									"            \"ita_ind\": {\"type\": \"number\"},",
									"            \"method_type\": {\"type\": \"string\"},",
									"            \"number_of_hours\": {\"type\": \"number\"},",
									"            \"group_exam_ind\": {\"type\": \"number\"}",
									"        },",
									"        \"required\": [\"exam_color\", \"exam_type_id\", \"exam_type_name\", \"ita_ind\", \"method_type\", \"number_of_hours\", \"group_exam_ind\"]",
									"    },",
									"    \"required\": []",
									"};           ",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response Exam Type Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, examTypeSchema)).to.be.true;",
									"});",
									"",
									"//  Store all exam type IDs for future use in adding exams",
									"var allExamIds = [];",
									"",
									"//  Make sure some data returned.",
									"pm.test(\"Response has exam_types property\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"exam_types\")).to.be.true;",
									"});",
									"pm.test(\"Response has at least one exam_type\", function(){",
									"    pm.expect(jsonData.exam_types.length).to.be.above(0);",
									"});",
									"",
									"// Set up list of valid exam types, create random functions.",
									"eval(environment.init_exam_type_data);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}exam_types/",
							"host": [
								"{{url}}exam_types"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Exams",
			"item": [
				{
					"name": "Exam Post End-point",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "15d24a13-a63f-4708-b882-3d214b9fc812",
								"exec": [
									"//  Get exam type data and functions.",
									"exam_array = JSON.parse(postman.getEnvironmentVariable(\"exam_array_data\"));",
									"eval(environment.create_random_functions);",
									"",
									"//  Create an event number based on the time.",
									"var ms = (new Date().getTime()).toString() + \"00\";",
									"eventNumber = Number(ms.substring(ms.length-6, ms.len)) + 1;",
									"postman.setEnvironmentVariable(\"event_number\", eventNumber);",
									"",
									"//  Update the next event ID.",
									"var eventId = \"pm\" + eventNumber.toString();",
									"postman.setEnvironmentVariable(\"update_number\", 0);",
									"postman.setEnvironmentVariable(\"event_id\", JSON.stringify(eventId));",
									"postman.setEnvironmentVariable(\"event_delete\", eventId);",
									"",
									"//  Calculate a random exam type to use.",
									"random_index = get_random_index(exam_array);",
									"",
									"//  Store for use.",
									"random_exam_type_id = exam_array[random_index].id;",
									"postman.setEnvironmentVariable(\"random_exam_type_id\", JSON.stringify(random_exam_type_id.toString()));",
									"",
									"//  Store other variables for later use.",
									"postman.setEnvironmentVariable(\"exam_method\", JSON.stringify(\"paper\"));",
									"postman.setEnvironmentVariable(\"exam_name\", JSON.stringify(\"Postman Group Exam Name\"));",
									"postman.setEnvironmentVariable(\"exam_written_ind\", JSON.stringify(\"0\"));",
									"postman.setEnvironmentVariable(\"examinee_name\", JSON.stringify(\"Postman Examinee Name\"));",
									"postman.setEnvironmentVariable(\"notes\", JSON.stringify(\"Postman Test Notes\"));",
									"postman.setEnvironmentVariable(\"number_of_students\", JSON.stringify(\"19\"));",
									"postman.setEnvironmentVariable(\"offsite_location\", JSON.stringify(\"Postman test location\"));",
									"",
									"//  Calculate an expiry date a week from today.",
									"var later = new Date();",
									"later.setDate(later.getDate()+7);",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format expiry date for the exam.",
									"expiry_date = year + \"-\" + month + \"-\" + day + \"T19:00:00Z\";",
									"",
									"//  Store globals.",
									"pm.globals.set(\"expiry_date\", JSON.stringify(expiry_date));",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "22647484-d04c-4aaf-ba37-caa5af09b811",
								"exec": [
									"//  Get the max response time allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"",
									"// Check Response code for request",
									"pm.test(\"Response code for request is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.exam_schema_check);",
									"eval(environment.exam_data_check);",
									"",
									"//  If jsonData has an exam property, save exam ID.",
									"if (jsonData.hasOwnProperty(\"exam\")) {",
									"\tcurrentExamId = jsonData.exam.exam_id;",
									"    postman.setEnvironmentVariable(\"current_exam_id\", currentExamId);",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\n\t\"event_id\" : {{event_id}},\n    \"exam_method\" : \"paper\",\n    \"exam_name\" : \"Postman Group Exam Name\",\n    \"exam_type_id\" : {{random_exam_type_id}},\n    \"exam_written_ind\" : \"0\",\n    \"examinee_name\" : \"Pm examinee name\",\n    \"notes\" : \"Pm sample notes\",\n    \"number_of_students\" : \"19\",\n    \"office_id\" : {{current_office_id}},\n    \"offsite_location\" : \"Pm test location\",\n    \"expiry_date\": {{expiry_date}}\n}"
						},
						"url": {
							"raw": "{{url}}exams/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Exam Detail End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "056b0d99-2027-45fc-afed-46ce68f116cf",
								"exec": [
									"//  Get the max response time allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.exam_schema_check);",
									"eval(environment.exam_data_check);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}exams/{{current_exam_id}}/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								"{{current_exam_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Exam List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c9c865c9-86f5-46a4-ac3e-7a2a64bc4f6d",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.exam_schema_list_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}exams/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Exam Put End-point",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "474f7568-0e89-4247-962a-a121b4d94943",
								"exec": [
									"//  Update the next event ID.",
									"var eventNumber = JSON.parse(postman.getEnvironmentVariable(\"event_number\"));",
									"var updateNumber = JSON.parse(postman.getEnvironmentVariable(\"update_number\")) + 1;",
									"var updateEventId = \"pm-up\" + updateNumber.toString() + \"-\" + eventNumber.toString();",
									"postman.setEnvironmentVariable(\"update_number\", updateNumber);",
									"postman.setEnvironmentVariable(\"update_id\", JSON.stringify(updateEventId));",
									"postman.setEnvironmentVariable(\"exam_name\", JSON.stringify(\"PM exam name - Update \" + updateNumber.toString()));",
									"postman.setEnvironmentVariable(\"examinee_name\", JSON.stringify(\"PM examinee - Update \" + updateNumber.toString()));",
									"postman.setEnvironmentVariable(\"notes\", JSON.stringify(\"PM exam notes - Update \" + updateNumber.toString()));",
									"postman.setEnvironmentVariable(\"offsite_location\", JSON.stringify(\"PM offsite location - Update \" + updateNumber.toString()));",
									"postman.setEnvironmentVariable(\"number_of_students\", JSON.stringify(\"21\"));",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fbeab9c3-f872-4668-b1f4-574bdd3bbf56",
								"exec": [
									"//  Get the max response time allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"",
									"// Check Response code for request",
									"pm.test(\"Response code for request is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.exam_schema_check);",
									"eval(environment.exam_data_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"event_id\" : {{update_id}},\n    \"exam_method\" : {{exam_method}},\n    \"exam_name\" : {{exam_name}},\n    \"exam_type_id\" : {{random_exam_type_id}},\n    \"exam_written_ind\" : {{exam_written_ind}},\n    \"examinee_name\" : {{examinee_name}},\n    \"notes\" : {{notes}},\n    \"number_of_students\" : \"119\",\n    \"office_id\" : {{current_office_id}},\n    \"offsite_location\" : {{offsite_location}}\n}\n"
						},
						"url": {
							"raw": "{{url}}exams/{{current_exam_id}}/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								"{{current_exam_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Exam Detail End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3ace2996-c6ab-428f-a39d-21d361b3ab3e",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.exam_schema_check);",
									"eval(environment.exam_data_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}exams/{{current_exam_id}}/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								"{{current_exam_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Exam Delete End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "030c9368-184c-4b54-bf0c-51cc2ac6ead9",
								"exec": [
									"//  Get the max response time allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"",
									"// Check Response code for request",
									"pm.test(\"Response code for request is 204\", function(){",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}exams/{{current_exam_id}}/",
							"host": [
								"{{url}}exams"
							],
							"path": [
								"{{current_exam_id}}",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Exams Export",
			"item": [
				{
					"name": "Exams Export List",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "084daa8f-673f-4444-af18-1e83a69e2995",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response time less than 20,000ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(20000);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1be93c72-430f-4f7f-899a-49b4a31f256a",
								"exec": [
									"//  Calculate a start date four weeks prior to today.",
									"var start = new Date();",
									"start.setDate(start.getDate()-28);",
									"",
									"//  Get year, day, month from the start time.",
									"start_year = start.getFullYear().toString();",
									"start_month = (\"0\" + (start.getMonth() + 1).toString()).slice(-2);",
									"start_day = (\"0\" + (start.getDate()).toString()).slice(-2);",
									"start_date = start_year + \"-\" + start_month + \"-\" + start_day;",
									"",
									"//  Get year, day, month from the current day.",
									"var today = new Date();",
									"end_year = today.getFullYear().toString();",
									"end_month = (\"0\" + (today.getMonth() + 1).toString()).slice(-2);",
									"end_day = (\"0\" + (today.getDate()).toString()).slice(-2);",
									"end_date = end_year + \"-\" + end_month + \"-\" + end_day;",
									"",
									"console.log(\"Start: \" + start_date);",
									"console.log(\"End:   \" + end_date);",
									"pm.globals.set(\"start_date\", start_date);",
									"pm.globals.set(\"end_date\", end_date);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}exams/export/?start_date={{start_date}}&end_date={{end_date}}",
							"host": [
								"{{url}}exams"
							],
							"path": [
								"export",
								""
							],
							"query": [
								{
									"key": "start_date",
									"value": "{{start_date}}"
								},
								{
									"key": "end_date",
									"value": "{{end_date}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Bookings",
			"item": [
				{
					"name": "Booking Post End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9f36f9ef-51fd-4ee2-bb1e-1d0c7f291092",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.booking_schema_check);",
									"eval(environment.booking_data_check);",
									"",
									"var booking_id = jsonData.booking.booking_id;",
									"",
									"//Dynamic variable used for end-point testing later on",
									"postman.setEnvironmentVariable(\"booking_id\", JSON.stringify(booking_id));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "74ff4922-78c3-43bf-a25a-0f2ed54f174c",
								"exec": [
									"//  Calculate a start date a week from today.",
									"var later = new Date();",
									"later.setDate(later.getDate()+7);",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format starting and ending time for the booking.",
									"start_time = year + \"-\" + month + \"-\" + day + \"T17:00:00Z\";",
									"end_time = year + \"-\" + month + \"-\" + day + \"T19:00:00Z\";",
									"",
									"//  Store globals.",
									"pm.globals.set(\"start_time\", JSON.stringify(start_time));",
									"pm.globals.set(\"end_time\", JSON.stringify(end_time));",
									"pm.globals.set(\"fees\", JSON.stringify(\"false\"));",
									"pm.globals.set(\"booking_name\", JSON.stringify(\"Super big demo next week\"));",
									"pm.globals.set(\"room_id\", pm.environment.get(\"room_id_1\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_time\": {{start_time}},\n  \"end_time\": {{end_time}},\n  \"room_id\": {{room_id}},\n  \"fees\": {{fees}},\n  \"booking_name\": {{booking_name}},\n  \"office_id\" : {{current_office_id}}\n}\n"
						},
						"url": {
							"raw": "{{url}}bookings/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Booking Detail End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "583ce529-5786-4d3a-a450-6fd9d62abfae",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.booking_schema_check);",
									"eval(environment.booking_data_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}bookings/{{booking_id}}/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								"{{booking_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Booking List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "204a31d4-bd94-4d4a-957c-04e648895bb4",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.booking_list_schema_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}bookings/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Booking Put End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8a152945-2747-4d36-be82-7b951fd45cf0",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.booking_schema_check);",
									"eval(environment.booking_data_check);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "7568c139-cb3f-47ae-b35d-af4eee091a34",
								"exec": [
									"//  Calculate a start date a week from today.",
									"var later = new Date();",
									"later.setDate(later.getDate()+7);",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format starting and ending time for the booking.",
									"start_time = year + \"-\" + month + \"-\" + day + \"T21:00:00Z\";",
									"end_time = year + \"-\" + month + \"-\" + day + \"T23:00:00Z\";",
									"",
									"pm.globals.set(\"start_time\", JSON.stringify(start_time));",
									"pm.globals.set(\"end_time\", JSON.stringify(end_time));",
									"pm.globals.set(\"fees\", JSON.stringify(\"true\"));",
									"pm.globals.set(\"booking_name\", JSON.stringify(\"Time to pay your fees!\"));",
									"pm.globals.set(\"room_id\", pm.environment.get(\"room_id_2\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_time\": {{start_time}},\n  \"end_time\": {{end_time}},\n  \"room_id\": {{room_id}},\n  \"fees\": {{fees}},\n  \"booking_name\": {{booking_name}},\n  \"office_id\" : {{current_office_id}}\n}"
						},
						"url": {
							"raw": "{{url}}bookings/{{booking_id}}/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								"{{booking_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Booking Detail End-point Again",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1e350481-25c8-4f9f-9409-7065180f21c8",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.booking_schema_check);",
									"eval(environment.booking_data_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}bookings/{{booking_id}}/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								"{{booking_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Booking Delete End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8600e1f5-2c7a-44c0-be56-c3846e9aea76",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 204\", function(){",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}bookings/{{booking_id}}/",
							"host": [
								"{{url}}bookings"
							],
							"path": [
								"{{booking_id}}",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Invigilators",
			"item": [
				{
					"name": "Invigilator List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d4c6a759-f9d2-44fe-87c0-28af3fcda49b",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var invigilatorSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"invigilators\": {",
									"            \"type\": \"array\",",
									"            \"properties\": {",
									"                \"contact_email\": {\"type\": \"string\"},",
									"                \"contact_phone\": {\"type\": \"string\"},",
									"                \"contract_expiry_date\": {\"type\": \"string\"},",
									"                \"contract_number\": {\"type\": \"string\"},",
									"                \"invigilator_id\": {\"type\": \"number\"},",
									"                \"invigilator_name\": {\"type\": \"string\"},",
									"                \"invigilator_notes\": {\"type\": \"string\"},",
									"                \"office\":{",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"office_id\": {\"type\": \"number\"},",
									"                        \"office_name\": {\"type\": \"string\"},",
									"                        \"office_number\": {\"type\": \"number\"},",
									"                        \"sb\": {",
									"                            \"type\": \"object\",",
									"                            \"properties\": {",
									"                                \"sb_id\": {\"type\": \"number\"},",
									"                                \"sb_type\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"sb_id\", \"sb_type\"]",
									"                        }",
									"                    },",
									"                    \"required\": [\"office_id\", \"office_name\", \"office_number\", \"sb\", \"sb_id\"]",
									"                }",
									"            },",
									"            \"required\": [\"contact_email\", \"contact_phone\", \"contract_expiry_date\", \"contract_number\", \"invigilator_id\", \"invigilator_name\", \"invigilator_notes\", \"office\"]",
									"        }",
									"    }",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response Invigilator Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, invigilatorSchema)).to.be.true;",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}invigilators/",
							"host": [
								"{{url}}invigilators"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Rooms",
			"item": [
				{
					"name": "Room List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6ce8e2ae-e30d-463d-8a56-665b8f7fbd2c",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var roomSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"rooms\": {",
									"            \"type\": \"array\",",
									"            \"properties\": {",
									"                \"capacity\": {\"type\": \"number\"},",
									"                \"color\": {\"type\": \"string\"},",
									"                \"office\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"office_id\": {\"type\": \"number\"},",
									"                        \"office_name\": {\"type\": \"string\"},",
									"                        \"office_number\": {\"type\": \"number\"},",
									"                        \"sb\": {",
									"                            \"type\": \"object\",",
									"                            \"properties\": {",
									"                                \"sb_id\": {\"type\": \"number\"},",
									"                                \"sb_type\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"sb_id\", \"sb_type\"]",
									"                        },",
									"                    \"sb_id\": {\"type\": \"number\"}                        ",
									"                    },",
									"                    \"required\": [\"office_id\", \"office_name\", \"office_number\", \"sb\", \"sb_id\"]",
									"                }",
									"            },",
									"            \"required\": [\"capacity\", \"color\", \"office\", \"room_id\", \"room_name\"]",
									"        }",
									"    }",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response Room Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, roomSchema)).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}rooms/",
							"host": [
								"{{url}}rooms"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "CSRS",
			"item": [
				{
					"name": "CSRS Me Get End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "08bf76b5-2d6b-4e8f-974e-a0e726118182",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var CSRSSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"csr\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"csr_id\": {\"type\": \"number\"},",
									"                \"csr_state\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"csr_state_desc\": {\"type\": \"string\"},",
									"                        \"csr_state_id\": {\"type\": \"number\"},",
									"                        \"csr_state_name\": {\"type\": \"string\"}",
									"                    },",
									"                    \"required\": [\"csr_state_desc\", \"csr_state_id\", \"csr_state_name\"]",
									"                },",
									"                \"csr_state_id\": {\"type\": \"number\"},",
									"                \"deleted\": {},",
									"                \"finance_designate\": {\"type\": \"number\"},",
									"                \"office_manager\": {\"type\": \"number\"},",
									"                \"ita2_designate\": {\"type\": \"number\"},",
									"                \"office\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"appointments_enabled_ind\": {\"type\": \"number\"},",
									"                        \"back_office_list\": {",
									"                            \"type\": \"array\",",
									"                            \"properties\": {",
									"                                \"actual_service_ind\": {\"type\": \"number\"},",
									"                                \"deleted\": {},",
									"                                \"display_dashboard_ind\": {\"type\": \"number\"},",
									"                                \"parent\": {",
									"                                    \"type\": \"object\",",
									"                                    \"properties\": {",
									"                                        \"service_name\": {\"type\": \"string\"}",
									"                                    },",
									"                                    \"required\": [\"service_name\"]",
									"                                },",
									"                                \"parent_id\": {\"type\": \"number\"},",
									"                                \"prefix\": {\"type\": \"string\"},",
									"                                \"service_code\": {\"type\": \"string\"},",
									"                                \"service_desc\": {\"type\": \"string\"},",
									"                                \"service_id\": {\"type\": \"number\"},",
									"                                \"service_name\": {\"type\": \"string\"},",
									"                            },",
									"                            \"required\": [\"actual_service_ind\", \"deleted\", \"display_dashboard_ind\", \"parent\",",
									"                                        \"parent_id\", \"prefix\", \"service_code\", \"service_desc\", \"service_id\",",
									"                                        \"service_name\"]",
									"                        },",
									"                        \"counters\": {",
									"                            \"type\": \"array\",",
									"                            \"properties\": {",
									"                                \"counter_id\": {\"type\": \"number\"},",
									"                                \"counter_name\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"counter_id\", \"counter_name\"]",
									"                        },",
									"                        \"exams_enabled_ind\": {\"type\": \"number\"},",
									"                        \"office_id\": {\"type\": \"number\"},",
									"                        \"office_name\": {\"type\": \"string\"},",
									"                        \"office_number\": {\"type\": \"number\"},",
									"                        \"quick_list\": {",
									"                            \"type\": \"array\",",
									"                            \"properties\": {",
									"                                \"actual_service_ind\": {\"type\": \"number\"},",
									"                                \"deleted\": {},",
									"                                \"display_dashboard_ind\": {\"type\": \"number\"},",
									"                                \"parent\": {",
									"                                    \"type\": \"object\",",
									"                                    \"properties\": {",
									"                                        \"service_name\": {\"type\": \"string\"}",
									"                                    },",
									"                                    \"required\": [\"service_name\"]",
									"                                },",
									"                                \"parent_id\": {\"type\": \"number\"},",
									"                                \"prefix\": {\"type\": \"string\"},",
									"                                \"service_code\": {\"type\": \"string\"},",
									"                                \"service_desc\": {\"type\": \"string\"},",
									"                                \"service_id\": {\"type\": \"number\"},",
									"                                \"service_name\": {\"type\": \"string\"},",
									"                            },",
									"                            \"required\": [\"actual_service_ind\", \"deleted\", \"display_dashboard_ind\", \"parent\",",
									"                                        \"parent_id\", \"prefix\", \"service_code\", \"service_desc\", \"service_id\",",
									"                                        \"service_name\"]",
									"                        },",
									"                        \"sb\":{",
									"                            \"type\": \"object\",",
									"                            \"properties\": {",
									"                                \"sb_id\": {\"type\": \"number\"},",
									"                                \"sb_type\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"sb_id\", \"sb_type\"]",
									"                        },",
									"                        \"sb_id\": {\"type\": \"number\"},",
									"                        \"timezone\": {",
									"                            \"type\": \"object\",",
									"                            \"properties\": {",
									"                                \"timezone_id\": {\"type\": \"number\"},",
									"                                \"timezone_name\": {\"type\": \"string\"}",
									"                            },",
									"                            \"required\": [\"timezone_id\", \"timezone_name\"]",
									"                        }",
									"                    },",
									"                    \"required\": [\"appointments_enabled_ind\", \"back_office_list\", \"counters\",",
									"                                 \"exams_enabled_ind\", \"office_id\", \"office_name\", \"office_number\",",
									"                                 \"quick_list\", \"sb\", \"sb_id\", ]",
									"                },",
									"                \"office_id\": {\"type\": \"number\"},",
									"                \"pesticide_designate\": {\"type\": \"number\"},",
									"                \"qt_xn_csr_ind\": {\"type\": \"number\"},",
									"                \"receptionist_ind\": {\"type\": \"number\"},",
									"                \"role\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"role_code\": {\"type\": \"string\"},",
									"                        \"role_desc\": {\"type\": \"string\"},",
									"                        \"role_id\": {\"type\": \"number\"}",
									"                    },",
									"                    \"required\": [\"role_code\", \"role_desc\", \"role_id\"]",
									"                },",
									"                \"role_id\": {\"type\": \"number\"},",
									"                \"username\": {\"type\": \"string\"}",
									"            },",
									"        },",
									"        \"attention_needed\": {\"type\": \"boolean\"},",
									"        \"active_citizens\" : {\"type\": \"array\"},",
									"        \"back_office_display\": {\"type\": \"string\"},",
									"        \"recurring_feature_flag\": {\"type\": \"string\"}",
									"    },",
									"    \"required\": [\"csr\", \"attention_needed\", \"active_citizens\", \"back_office_display\", \"recurring_feature_flag\"]",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response CSRs Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, CSRSSchema)).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "f0b5f731-1673-4e9f-8500-1fc3856e8f95",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Offices",
			"item": [
				{
					"name": "Office List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d41f8216-2e21-4010-adf7-b0547e6b3870",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var officeSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"offices\": {",
									"            \"type\": \"array\",",
									"            \"properties\": {",
									"                \"max_person_appointment_per_day\": {\"type\": \"number\"},",
									"                \"telephone\": {\"type\": \"string\"},",
									"                \"appointment_days_limit\": {\"type\": \"number\"},",
									"                \"online_status:\": {\"type\": \"string\"},",
									"                \"sb_id\": {\"type\": \"number\"},",
									"                \"office_name\": {\"type\": \"string\"},",
									"                \"timezone\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"timezone_id\": {\"type\": \"number\"},",
									"                        \"timezone_name\": {\"type\": \"string\"}",
									"                    }",
									"                },",
									"                \"office_number\": {\"type\": \"number\"},",
									"                \"appointments_enabled_ind\": {\"type\": \"number\"},",
									"                \"sb\": {",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"sb_id\": {\"type\": \"number\"},",
									"                        \"sb_type\": {\"type\": \"string\"}",
									"                    },",
									"                    \"required\": [\"sb_id\", \"sb_type\"]",
									"                },",
									"                \"civic_address\": {\"type\": \"string\"},",
									"                \"exams_enabled_ind\": {\"type\": \"number\"},",
									"                \"office_id\": {\"type\": \"number\"},",
									"                \"office_appointment_message\": {\"type\": [\"null\", \"string\"]},",
									"                \"latitude\": {\"type\": \"number\"},",
									"                \"counters\": {\"type\": \"array\"},",
									"                \"back_office_list\": {\"type\": \"array\"},",
									"                \"longitude\": {\"type\": \"number\"},",
									"                \"appointment_duration\": {\"type\": \"number\"},",
									"                \"quick_list\": {\"type\": \"array\"},",
									"                \"timeslots\": {\"type\": \"array\"}",
									"            },",
									"            ",
									"            \"required\": [\"max_person_appointment_per_day\", \"telephone\", \"appointment_days_limit\", \"online_status\",",
									"                         \"sb_id\", \"office_name\", \"timezone\", \"office_number\", \"appointments_enabled_ind\",",
									"                         \"sb\", \"civic_address\", \"exams_enabled_ind\", \"office_id\", \"office_appointment_message\",",
									"                         \"latitude\", \"counters\", \"back_office_list\", \"longitude\", \"appointment_duration\",",
									"                         \"quick_list\", \"timeslots\"]",
									"        }",
									"    }",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response Office Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, officeSchema)).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}offices/",
							"host": [
								"{{url}}offices"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Appointments",
			"item": [
				{
					"name": "Appointment Post End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8e5bcf23-ddf6-404f-90cd-18c5ababc557",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.appointment_schema_check);",
									"eval(environment.appointment_data_check);",
									"",
									"var appointment_id = jsonData.appointment.appointment_id;",
									"",
									"//Dynamic variable used for end-point testing later on",
									"postman.setEnvironmentVariable(\"appointment_id\", JSON.stringify(appointment_id));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "e5d31965-2b2c-47bb-9115-2b9eb067b02c",
								"exec": [
									"//  Calculate a start date a week from today.",
									"var later = new Date();",
									"later.setDate(later.getDate()+7);",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format starting and ending time for the booking.",
									"start_time = year + \"-\" + month + \"-\" + day + \"T17:00:00Z\";",
									"end_time = year + \"-\" + month + \"-\" + day + \"T19:00:00Z\";",
									"",
									"pm.globals.set(\"start_time\", JSON.stringify(start_time));",
									"pm.globals.set(\"end_time\", JSON.stringify(end_time));",
									"pm.globals.set(\"category\", JSON.stringify(\"Exam\"));",
									"pm.globals.set(\"comments\", JSON.stringify(\"Missed playoffs, needs to talk #1.\"));",
									"pm.globals.set(\"citizen_name\", JSON.stringify(\"LeBron James Appointment #1\"));",
									"pm.globals.set(\"service_id\", pm.environment.get(\"service_PropTax_id\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"service_id\": {{service_id}},\n \"office_id\" : {{current_office_id}},\n \"start_time\": {{start_time}},\n \"end_time\": {{end_time}},\n \"category\": {{category}},\n \"comments\": {{comments}},\n \"citizen_name\": {{citizen_name}}\n}"
						},
						"url": {
							"raw": "{{url}}appointments/",
							"host": [
								"{{url}}appointments"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Appointment Detail End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "440e6e6f-ad0e-4826-a710-4021c28fe963",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.appointment_schema_check);",
									"eval(environment.appointment_data_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}appointments/{{appointment_id}}/",
							"host": [
								"{{url}}appointments"
							],
							"path": [
								"{{appointment_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Appointment List End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "63aaa7a9-94eb-4a7a-992d-3f3a730d2138",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid\\",
									"eval(environment.appointment_list_schema_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}appointments/",
							"host": [
								"{{url}}appointments"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Appointment Put End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c0ae6157-3105-4237-b853-786ce819349b",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.appointment_schema_check);",
									"eval(environment.appointment_data_check);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "2ba6eb52-c30e-4f06-a91b-aade3b8a71be",
								"exec": [
									"//  Calculate a start date a week from today.",
									"var later = new Date();",
									"later.setDate(later.getDate()+7);",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format starting and ending time for the booking.",
									"start_time = year + \"-\" + month + \"-\" + day + \"T21:00:00Z\";",
									"end_time = year + \"-\" + month + \"-\" + day + \"T23:00:00Z\";",
									"",
									"pm.globals.set(\"start_time\", JSON.stringify(start_time));",
									"pm.globals.set(\"end_time\", JSON.stringify(end_time));",
									"pm.globals.set(\"comments\", JSON.stringify(\"super EARLY\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"office_id\" : {{current_office_id}},\n \"start_time\": {{start_time}},\n \"end_time\": {{end_time}},\n \"category\": {{category}},\n \"comments\": {{comments}}\n}"
						},
						"url": {
							"raw": "{{url}}appointments/{{appointment_id}}/",
							"host": [
								"{{url}}appointments"
							],
							"path": [
								"{{appointment_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Appointment Delete End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9a7ecf6b-8cf7-42f2-99e8-f408d4294076",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 204\", function(){",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}appointments/{{appointment_id}}/",
							"host": [
								"{{url}}appointments"
							],
							"path": [
								"{{appointment_id}}",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Public User Appointments",
			"item": [
				{
					"name": "Authenticate and create user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4ecc58b2-a868-402c-a169-79da16960633",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"",
									"var user_id = jsonData[0].user_id;",
									"",
									"//Dynamic variable used for end-point testing later on",
									"postman.setEnvironmentVariable(\"user_id\", JSON.stringify(user_id));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{public_user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Typea",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n}"
						},
						"url": {
							"raw": "{{public_url}}users/",
							"host": [
								"{{public_url}}users"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Book an appointment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7071de38-0561-4c31-9981-ecb2265e221d",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"eval(environment.appointment_schema_check);",
									"eval(environment.appointment_data_check);",
									"",
									"var appointment_id = jsonData.appointment.appointment_id;",
									"",
									"//Dynamic variable used for end-point testing later on",
									"postman.setEnvironmentVariable(\"appointment_id\", JSON.stringify(appointment_id));",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "bd4c2357-aef7-4e91-9728-6fc504cf94e1",
								"exec": [
									"//  Calculate a start date a week from today.",
									"var later = new Date();",
									"var day = later.getDay();",
									"later.setDate(later.getDate() + 5 + (day === 6 ? 2 : +!day) + (Math.floor((5 - 1 + (day % 6 || 1)) / 5) * 2));",
									"",
									"//  Get year, day, month from the later time.",
									"year = later.getFullYear().toString();",
									"month = (\"0\" + (later.getMonth() + 1).toString()).slice(-2);",
									"day = (\"0\" + (later.getDate()).toString()).slice(-2);",
									"",
									"//  Format starting and ending time for the booking.",
									"start_time = year + \"-\" + month + \"-\" + day + \"T23:00:00Z\";",
									"end_time = year + \"-\" + month + \"-\" + day + \"T23:30:00Z\";",
									"",
									"pm.globals.set(\"public_start_time\", JSON.stringify(start_time));",
									"pm.globals.set(\"public_end_time\", JSON.stringify(end_time));",
									"pm.globals.set(\"category\", JSON.stringify(\"Exam\"));",
									"pm.globals.set(\"comments\", JSON.stringify(\"Missed playoffs, needs to talk #1.\"));",
									"pm.globals.set(\"citizen_name\", JSON.stringify(\"LeBron James Appointment #1\"));",
									"pm.globals.set(\"service_id\", pm.environment.get(\"service_PropTax_id\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{public_user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"service_id\": {{service_id}},\n \"office_id\" : {{current_office_id}},\n \"start_time\": {{public_start_time}},\n \"end_time\": {{public_end_time}},\n \"category\": {{category}},\n \"comments\": {{comments}}\n}"
						},
						"url": {
							"raw": "{{public_url}}appointments/",
							"host": [
								"{{public_url}}appointments"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit user profile",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "64049201-8629-41ac-b35e-2cd200742888",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{public_user_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"test@test.com\",\n    \"telephone\": \"7787777777\",\n    \"send_reminders\": true\n}"
						},
						"url": {
							"raw": "{{public_url}}users/{{user_id}}/",
							"host": [
								"{{public_url}}users"
							],
							"path": [
								"{{user_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "List all appointments",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "af2a101b-6fce-4a6f-acd4-2081cde795b2",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid\\",
									"eval(environment.appointment_list_schema_check);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{public_user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{public_url}}users/appointments/",
							"host": [
								"{{public_url}}users"
							],
							"path": [
								"appointments",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Appointment Delete End-point",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "22be8a11-b299-43d7-893b-c4f71c3169aa",
								"exec": [
									"// Check Response code for request",
									"pm.test(\"Response code for request is 204\", function(){",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"//  Check if response time less than max allowed.",
									"var response_max = JSON.parse(globals.response_max);",
									"pm.test(\"Response time less than \" + response_max.toString() + \"ms\", function(){",
									"    pm.expect(pm.response.responseTime).to.be.below(response_max);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{public_user_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{public_url}}appointments/{{appointment_id}}/",
							"host": [
								"{{public_url}}appointments"
							],
							"path": [
								"{{appointment_id}}",
								""
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "44d7c40b-2e22-447f-b565-69166662527c",
						"type": "text/javascript",
						"exec": [
							"auth_url = globals.auth_url;",
							"realm = globals.realm;",
							"clientid = globals.clientid;",
							"userid = globals.public_user_id;",
							"password = globals.public_user_password;",
							"client_secret = globals.client_secret;",
							"",
							"const echoPostRequest = {",
							"  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',",
							"  method: 'POST',",
							"  header: 'Content-Type:application/x-www-form-urlencoded',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'grant_type=password&client_id=' + clientid ",
							"          + '&username=' + userid ",
							"          + '&password=' + password",
							"          + '&client_secret=' + client_secret",
							"  }",
							"};",
							"pm.sendRequest(echoPostRequest, function (err, res) {",
							"    var jsonData = res.json();",
							"    if (jsonData.hasOwnProperty('access_token')) {",
							"    \tpm.globals.set(\"public_user_token\", jsonData.access_token);",
							"\t    pm.globals.set(\"public_user_refresh_token\", jsonData.refresh_token);",
							"\t    if (err) {",
							"\t        console.log(err);",
							"\t    }",
							"\t    // console.log(err ? err : res.json());",
							"\t} else {",
							"\t    pm.globals.set(\"public_user_token\", 0);",
							"\t    pm.globals.set(\"public_user_refresh_token\", 0);",
							"\t}",
							"});"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "b723ccc3-4c50-4b2f-a355-ce3ce9778fdc",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}